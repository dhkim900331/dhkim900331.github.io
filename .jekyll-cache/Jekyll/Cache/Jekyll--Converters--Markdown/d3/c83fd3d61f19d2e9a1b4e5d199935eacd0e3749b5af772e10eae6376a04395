I"ÖH<h2 id="1-ê°œìš”">1. ê°œìš”</h2>

<p>WebLogic Server 14c ê¸°ì¤€ì—ì„œ Client ì¸¡ì— TLS Protocolì„ ì–´ë–»ê²Œ ë‹¤ë£¨ëŠ”ì§€ ì•Œì•„ë³¸ë‹¤.</p>

<p><a href="How-To-Enable-TLS-Server">How-To-Enable-TLS-Server</a> ì—ì„œëŠ” Serverì¸¡ ê¸°ì¤€ì´ì—ˆìœ¼ë‚˜,</p>

<p><a href="How-To-Enable-TLS-Client">How-To-Enable-TLS-Client </a>ì—ì„œëŠ” WLSê°€ Clientê°€ ë˜ì—ˆì„ ê²½ìš°ë¥¼ ì„¤ëª…í•œë‹¤.</p>

<h2 id="2-inbound-tls">2. Inbound TLS</h2>

<p>ë‹¤ìŒ ì˜µì…˜ìœ¼ë¡œ TLSë¥¼ ë°›ì•„ë“¤ì´ëŠ” Serverì¸¡ì˜ Protocolì€ TLSv1.2 ì´ìƒì´ ëœë‹¤.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nv">USER_MEM_ARGS</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">USER_MEM_ARGS</span><span class="k">}</span><span class="s2"> -Djava.security.properties=</span><span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span><span class="s2">/java.security"</span>
<span class="nv">USER_MEM_ARGS</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">USER_MEM_ARGS</span><span class="k">}</span><span class="s2"> -Dweblogic.security.SSL.minimumProtocolVersion=TLSv1.2"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="3-outbound-tls">3. Outbound TLS</h2>

<p>WLS ê°€ Clientê°€ ë˜ì–´ Outbound TLS í†µì‹ ì€ ì—¬ëŸ¬ê°€ì§€ í™˜ê²½ì— ë”°ë¼, ì‚´í´ë³´ì•„ì•¼ í•˜ëŠ”ê²ƒ ê°™ë‹¤.</p>

<h3 id="31-url-openstream">3.1 URL openStream</h3>

<p>URL classì˜ openStreamìœ¼ë¡œ Outbound TLS í˜¸ì¶œì„ í•  ê²½ìš°ë¥¼ ì‚´í´ë³¸ë‹¤.</p>

<p>í˜¸ì¶œ ì–´í”Œë¦¬ì¼€ì´ì…˜</p>

<div class="language-jsp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;%@ page </span><span class="na">import=</span><span class="s">"java.io.*"</span> <span class="nt">%&gt;</span>
<span class="nt">&lt;%@ page </span><span class="na">import=</span><span class="s">"java.net.URL"</span> <span class="nt">%&gt;</span>
<span class="nt">&lt;%@ page </span><span class="na">import=</span><span class="s">"weblogic.net.http.HttpsURLConnection"</span> <span class="nt">%&gt;</span>


<span class="nt">&lt;%</span>
    <span class="nc">String</span> <span class="n">url</span> <span class="o">=</span> <span class="s">"https://wls.local:8442/testApp/index.jsp"</span><span class="o">;</span>
    <span class="no">URL</span> <span class="n">u</span> <span class="o">=</span> <span class="k">new</span> <span class="no">URL</span><span class="o">(</span><span class="n">url</span><span class="o">);</span>
    <span class="nc">HttpsURLConnection</span> <span class="n">httpsUrlConnection</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpsURLConnection</span><span class="o">)</span> <span class="n">u</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Resp Code : "</span> <span class="o">+</span> <span class="n">httpsUrlConnection</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">());</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Cipher Suite : "</span> <span class="o">+</span> <span class="n">httpsUrlConnection</span><span class="o">.</span><span class="na">getCipherSuite</span><span class="o">());</span>

    <span class="c1">// https://docs.oracle.com/javase/tutorial/networking/urls/readingURL.html</span>
    <span class="nc">BufferedReader</span> <span class="n">br</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">u</span><span class="o">.</span><span class="na">openStream</span><span class="o">()));</span>
    <span class="nc">String</span> <span class="n">inputLine</span><span class="o">;</span>
    <span class="k">while</span> <span class="o">((</span><span class="n">inputLine</span> <span class="o">=</span> <span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">inputLine</span><span class="o">);</span>
    <span class="n">br</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="nt">%&gt;</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<p>Outbound TLSv1.2 ë¥¼ í™œì„±í™” í•´ì•¼ í•œë‹¤.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nv">USER_MEM_ARGS</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">USER_MEM_ARGS</span><span class="k">}</span><span class="s2"> -Djdk.tls.client.protocols=TLSv1.2"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ì–´í”Œë¦¬ì¼€ì´ì…˜ í˜¸ì¶œ ì‹œì—, ì •ìƒì ì¸ ê²½ìš° ì•„ë˜ì²˜ëŸ¼ í‘œì‹œëœë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>Resp Code : 200
Cipher Suite : TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
Hello World
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">-Djdk.tls.client.protocols=TLSv1.1</code> ì„¤ì • ì‹œì—ëŠ” ì•„ë˜ì²˜ëŸ¼ í‘œì‹œëœë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>javax.net.ssl.SSLHandshakeException: No appropriate protocol (protocol is disabled or cipher suites are inappropriate)
        at sun.security.ssl.HandshakeContext.&lt;init&gt;(HandshakeContext.java:171)
        at sun.security.ssl.ClientHandshakeContext.&lt;init&gt;(ClientHandshakeContext.java:106)
        at sun.security.ssl.TransportContext.kickstart(TransportContext.java:238)
        at sun.security.ssl.SSLEngineImpl.writeRecord(SSLEngineImpl.java:167)
        at sun.security.ssl.SSLEngineImpl.wrap(SSLEngineImpl.java:131)
        Truncated. see log file for complete stacktrace

</pre></td></tr></tbody></table></code></pre></div></div>

<p><a href="https://docs.oracle.com/en/middleware/standalone/weblogic-server/14.1.1.0/secmg/ssl_version.html#GUID-CAC4495F-B8A1-4F62-A9C2-358DC717A830">weblogic.security.SSL.minimumProtocolVersion ì‹œìŠ¤í…œ ì†ì„± ì‚¬ìš©</a> ì˜ ì•„ë˜ ë©”ëª¨ì— ë”°ë¥´ë©´, <code class="language-plaintext highlighter-rouge">weblogic.security.SSL.minimumProtocolVersion</code>ì˜µì…˜ê³¼, <code class="language-plaintext highlighter-rouge">jdk.tls.client.protocols</code> ì˜µì…˜ì€ ê°™ì´ ì ìš©í•  ìˆ˜ ì—†ë‹¤ê³  ë‚˜ì™€ ìˆë‹¤.</p>

<p>ê·¸ë ‡ê¸° ë•Œë¬¸ì—, ì¸ìŠ¤í„´ìŠ¤ë¥¼ 2ê°œë¡œ ë¶„ë¦¬í•˜ì—¬ í…ŒìŠ¤íŠ¸ í•´ì•¼ í•œë‹¤.</p>

<p><a href="https://blogs.oracle.com/java/post/diagnosing-tls-ssl-and-https">ì˜¤ë¼í´ diagnosing-tls-ssl-and-https ê²Œì‹œë¬¼</a> ì˜ â€œ<strong>JSSE ì¡°ì • ë§¤ê°œë³€ìˆ˜</strong>â€ ì— ë”°ë¥´ë©´,</p>

<p>HttpsURLConnection í´ë˜ìŠ¤, URL í´ë˜ìŠ¤ì˜ openStream ì„ ì‚¬ìš©í•  ë•ŒëŠ” <code class="language-plaintext highlighter-rouge">https.protocols</code> ì˜µì…˜ì„ ì‚¬ìš©ì„ ì•ˆë‚´í•œë‹¤.</p>

<p>ìœ„ URL í´ë˜ìŠ¤ì˜ openStream í…ŒìŠ¤íŠ¸ì‹œ <code class="language-plaintext highlighter-rouge">jdk.tls.client.protocols</code> ì˜µì…˜ì— ì˜í–¥ì´ ë¯¸ì³¤ë‹¤.</p>

<p><del>ì´ëŸ¬í•œ ë¶€ë¶„ì€, ë¸”ë¡œê·¸ ì‘ì„± ì¤‘ì—ë„ ì •í™•íˆ íŒŒì•…ì´ ì•ˆëœë‹¤.</del></p>

<p>ë‹¤ì‹œ ì‚´í´ë³´ë‹ˆ, Java 7 ì´ì „ ë²„ì „ì—ì„œ Clientì˜ Outbound TLS í†µì‹ ì¼ ê²½ìš°ì— ì ìš©í•˜ëŠ” ì˜µì…˜ìœ¼ë¡œ ë³´ì—¬ì§„ë‹¤.</p>

<p>ë‚´ í…ŒìŠ¤íŠ¸ í™˜ê²½ì— ë”°ë¥¸, <a href="https://docs.oracle.com/javase/8/docs/technotes/guides/security/enhancements-8.html">JDK 8 Security Enhancements</a> ë¬¸ì„œë¥¼ ë³´ë©´ Java SE 8 ë¶€í„° <code class="language-plaintext highlighter-rouge">jdk.tls.client.protocols</code> ì˜µì…˜ì„ ê°€ì´ë“œí•˜ê³  ìˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ ìœ„ ë¸”ë¡œê·¸ì˜ ë‚´ìš©ì´ ì•„ë‹ˆë¼ ê³µì‹ ë¬¸ì„œì— ì˜ê²¬ëŒ€ë¡œ ì˜µì…˜ì„ ì‚¬ìš©í•˜ëŠ”ê²ƒì´ ì˜¬ë°”ë¼ ë³´ì¸ë‹¤.</p>

<h3 id="32-httpsurlconnection-sslcontext">3.2 HttpsUrlConnection (SSLContext)</h3>

<p>í•´ë‹¹ ë¶€ë¶„ì€ URL openStreamê³¼ ë™ì¼í•  ê²ƒì´ë¯€ë¡œ,</p>

<p>SSLContext ë¶€ë¶„ì˜µì…˜ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ í•œë‹¤.</p>

<p>HTTPS URLì€ í˜¸ì¶œ ì‹œë§ˆë‹¤ ë…ë¦½ì ì¸ ì±„ë„(?)ì´ ì‚¬ìš©ëœë‹¤ê³  í•œë‹¤.</p>

<p>ì´ ì±„ë„ë§ˆë‹¤ ì„œë¡œ ë‹¤ë¥¸ TLS protocolì„ ì ìš©í•˜ê¸° ìœ„í•˜ì—¬ SSLContextë¥¼ ì´ë²ˆ í…ŒìŠ¤íŠ¸ì— ë…¹ì—¬ë³´ì•˜ë‹¤.</p>

<p><em>ë‹¤ë§Œ, ë§¨ ì•„ë˜ì—ì„œ ì„¤ëª…í•˜ê² ì§€ë§Œ SSLContextì— ì›í•˜ëŠ” protocolì´ ì‚¬ì‹¤ìƒ êµ¬í˜„ë˜ì§€ ì•Šì•˜ë‹¤.</em></p>

<p>ë‹¤ìŒì˜ <a href="https://goddaehee.tistory.com/268">ì–´í”Œë¦¬ì¼€ì´ì…˜</a>ì„ ì‚¬ìš©í•˜ê³ ,</p>

<p>SSLContext ë¥¼ ì‚¬ìš©í•˜ì—¬ íŠ¹ì • TLS versionì„ ê°•ì œ ì§€ì •í•œë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
</pre></td><td class="rouge-code"><pre>&lt;%@ page import="java.io.*" %&gt;
&lt;%@ page import="java.net.*" %&gt;
&lt;%@ page import="javax.net.ssl.SSLContext" %&gt;
&lt;%@ page import="javax.net.ssl.HttpsURLConnection" %&gt;
&lt;%@ page import="javax.net.ssl.SSLSession" %&gt;
&lt;%@ page import="javax.net.ssl.HostnameVerifier" %&gt;

&lt;%

String urlString = "https://wls.local:8442/testApp/index.jsp";
String line = null;
InputStream in = null;
BufferedReader reader = null;
HttpsURLConnection httpsConn = null;

String protocol=request.getParameter("protocol");

try {
	// Get HTTPS URL connection
	URL url = new URL(urlString);
	httpsConn = (HttpsURLConnection) url.openConnection();

	httpsConn.setHostnameVerifier(new HostnameVerifier() {
		@Override
		public boolean verify(String hostname, SSLSession session) {
			// Ignore host name verification. It always returns true.
			return true;
		}
			});

	int responseCode = httpsConn.getResponseCode();
	System.out.println("Resp Code : " + responseCode);
	System.out.println("Resp Msgs : " + httpsConn.getResponseMessage());

	// SSL setting
	SSLContext context = SSLContext.getInstance(protocol);
	context.init(null,null,null);
	httpsConn.setSSLSocketFactory(context.getSocketFactory());
	System.out.println("getProtocol() : " + context.getProtocol());

	// Connect to host
	httpsConn.connect();
	httpsConn.setInstanceFollowRedirects(true);

	// Print response from host
	if (responseCode == HttpsURLConnection.HTTP_OK) { // ì •ìƒ í˜¸ì¶œ 200
			in = httpsConn.getInputStream();
	} else { // ì—ëŸ¬ ë°œìƒ
			in = httpsConn.getErrorStream();
	}
	reader = new BufferedReader(new InputStreamReader(in));
	while ((line = reader.readLine()) != null) {
			System.out.printf("%s\n", line);
	}

	reader.close();
} catch (Exception e) {
	System.out.println("error : " + e);
	e.printStackTrace();
}

%&gt;

</pre></td></tr></tbody></table></code></pre></div></div>

<p><a href="https://www.java.com/en/configure_crypto.html">Java ê³µì‹ ì–¸ê¸‰ - Enabling TLSv1.3 by default on the client</a> ì— ë”°ë¥´ë©´ HttpsUrlConnectionê³¼ URL.openStream() ì‚¬ìš© ì‹œì— ì–´ë–¤ ì˜µì…˜ì„ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ì§€ë¥¼ ì•Œë ¤ì£¼ê³  ìˆë‹¤.</p>

<p><del>ê·¸ëŸ¬ë‚˜, í•´ë‹¹ ì„¤ëª…ê³¼ ë‹¤ë¥´ê²Œ ì •ìƒ/ë¹„ì •ìƒ ë™ì‘ì„ ë³´ì´ê³  ìˆì–´ ë” í™•ì¸ì´ í•„ìš”í•œ ìƒí™©ì´ë‹¤.</del></p>

<p>ìœ„ ì–´í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ì‹œì—, <code class="language-plaintext highlighter-rouge">url.openConnection()</code> Returnìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">weblogic.net.http.SOAPHttpsURLConnection</code>ì„ ë°˜í™˜í•˜ì—¬ ì—ëŸ¬ê°€ ë°œìƒí–ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>java.lang.ClassCastException: weblogic.net.http.SOAPHttpsURLConnection cannot be cast to javax.net.ssl.HttpsURLConnection
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ìœ„ í•´ê²°ì±…ìœ¼ë¡œ ë‹¤ìŒì˜ ê³µì‹ ìë£Œê°€ Google snipets ìœ¼ë¡œ ë‚˜ì˜¤ë‚˜</p>

<blockquote>
  <p><strong>java.lang.ClassCastException: weblogic.net.http.SOAPHttpsURLConnectionì„ javax.net.ssl.HttpsURLConnectionìœ¼ë¡œ ìºìŠ¤íŠ¸í•  ìˆ˜ ì—†ìŒ(Doc ID 2332805.1)</strong></p>
</blockquote>

<p>ì—¬ê¸°ì— ê·¸ ë‚´ìš©ì„ ì˜¨ì „íˆ ì˜®ê¸¸ ìˆ˜ ì—†ë‹¤.</p>

<p>ë‹¤ë§Œ ê·¸ ì™¸ ìë£Œë¥¼ í†µí‹€ì–´ë³´ë©´ , ëŒ€ê²Œ ë‹¤ìŒì˜ í•´ê²°ì±…ì´ ê±°ë¡ ë˜ì—ˆë‹¤.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nt">-DUseSunHttpHandler</span><span class="o">=</span><span class="nb">true</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ìœ„ ì˜µì…˜ìœ¼ë¡œ ì‹¤í–‰ ì‹œ, ì¶”ê°€ë¡œ ì¸ì¦ì„œ ì˜µì…˜ì´ í•„ìš”í•˜ì˜€ë‹¤.</p>

<p>ì•„ë˜ëŠ” ì „ì²´ ì˜µì…˜ì´ë‹¤.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="nt">-Djdk</span>.tls.client.protocols<span class="o">=</span>TLSv1.2
<span class="nt">-DUseSunHttpHandler</span><span class="o">=</span><span class="nb">true</span>
<span class="nt">-Djavax</span>.net.ssl.trustStore<span class="o">=</span>trust.jks
<span class="nt">-Djavax</span>.net.ssl.trustStorePassword<span class="o">=</span><span class="k">***</span>
<span class="nt">-Djavax</span>.net.ssl.keyStoreType<span class="o">=</span>JKS
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">jdk.tls.client.protocols</code> ê°’ì´ Outbound Targetì¸ Serverì˜ TLS Versionê³¼ ë§ì§€ ì•Šìœ¼ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.</p>

<ul>
  <li>Client WAS is TLSv1.1</li>
  <li>Server WAS is TLSv1.3</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>javax.net.ssl.SSLHandshakeException: No appropriate protocol (protocol is disabled or cipher suites are inappropriate)
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">jdk.tls.client.protocols</code> ê°’ì´ Outbound Targetì¸ Serverì˜ TLS Versionê³¼ êµì§‘í•©ìœ¼ë¡œ ì„¤ì •ë  ê²½ìš°.</p>

<ul>
  <li>Client WAS is TLSv1.1 ~ 1.3</li>
  <li>Server WAS is TLSv1.3</li>
</ul>

<p>ìœ„ ìƒí™©ì—ì„œ, ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ <code class="language-plaintext highlighter-rouge">https.jsp?protocol=TLSv1.1</code> ìœ¼ë¡œ í˜¸ì¶œí•  ê²½ìš°, í˜„ì¬ URL í˜¸ì¶œì— ëŒ€í•´ì„œë§Œ íŠ¹ë³„íˆ TLSv1.1 ìœ¼ë¡œ ê°•ì œ ì§€ì •í•˜ê¸¸ ì›í•˜ì˜€ì§€ë§Œ, ì–´í”Œë¦¬ì¼€ì´ì…˜ ë¬¸ì œì¸ì§€, í˜¹ì€ ì§€ê¸ˆ ì•Œì§€ ëª»í•˜ëŠ” ë‹¤ë¥¸ í™˜ê²½ì— ëŒ€í•œ ë¬¸ì œì¸ì§€â€¦</p>

<p>ìœ„ ì–´í”Œë¦¬ì¼€ì´ì…˜ í†µì‹  ì‹œ ì •ìƒì ì¸ ê²½ìš° <code class="language-plaintext highlighter-rouge">javax.net.debug=all</code> ì„ ì‚´í´ë³´ë©´</p>

<ul>
  <li>Client Hello</li>
</ul>

<p>ì•„ë˜ì™€ ê°™ì´ JDK 1.8ì˜ ê¸°ë³¸ê°’ TLSv1.2 ê°€ ì‚¬ìš©ë˜ê³  ìˆë‹¤.</p>

<p>ë‹¤ì‹œ ì–¸ê¸‰í•˜ìë©´, SSLContextì— ì§ì ‘ TLSv1.3 ê°•ì œ ì„¤ì • í›„ í˜¸ì¶œí•˜ì˜€ëŠ”ë°, ì•„ë˜ ë¡œê·¸ê°€ ê·¸ì™€ ì—°ê´€ì´ ìˆëŠ”ê²Œ ë§ë‹¤ë©´ í…ŒìŠ¤íŠ¸ ì–´í”Œë¦¬ì¼€ì´ì…˜ ë˜ëŠ” í™˜ê²½ì˜ ë¬¸ì œê°€ ìˆìœ¼ë¦¬ë¼ ìƒê°ëœë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>"ClientHello": {
  "client version"      : "TLSv1.2"
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Client Helloì˜ ì§€ì›ë˜ëŠ” ë²„ì „ì´ í™•ì¸ëœë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">jdk.tls.client.protocols</code> ê°’ìœ¼ë¡œ ì„¤ì •í•œ TLSv1.1 ì€ ì•ˆë³´ì¸ë‹¤â€¦</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>    "supported_versions (43)": {
      "versions": [TLSv1.3, TLSv1.2]
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Server HelloëŠ”</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>"ServerHello": {
  "server version"      : "TLSv1.2"
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>    "supported_versions (43)": {
      "selected version": [TLSv1.3]
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="4-outcome">4. Outcome</h2>

<p>Outbound SSL í†µì‹ ì‹œ, WAS ì†”ë£¨ì…˜ë§ˆë‹¤ ì§€ì›í•˜ëŠ” ì˜µì…˜ì´ ìˆìŒì´ í™•ì¸ëœë‹¤.</p>

<p>ì—¬ê¸°ì„œëŠ” ëŒ€ë¶€ë¶„ ê¸°ë³¸(SunHandler) ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ì–´, ê·¸ìª½ìœ¼ë¡œ ì˜µì…˜ì´ ì•ˆë‚´ë˜ì—ˆë‹¤.</p>
:ET