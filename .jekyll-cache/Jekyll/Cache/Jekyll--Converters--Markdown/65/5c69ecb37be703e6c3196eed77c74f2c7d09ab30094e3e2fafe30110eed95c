I"İ+<p><br /># 1. ê°œìš”</p>

<p>BSU, OPatch, Tool Upgrade ì •ë¦¬</p>

<p><br /></p>
<h2 id="2-patch-ì „ì—ëŠ”-ë°±ì—…ì´-í•„ìˆ˜ë‹¤">2. Patch ì „ì—ëŠ” ë°±ì—…ì´ í•„ìˆ˜ë‹¤.</h2>

<p>ì˜¤ë¼í´ ê³µì‹ë¬¸ì„œì—ì„œëŠ” ORACLE_HOME ë°±ì—…ì„ ê¶Œê³ í•œë‹¤.</p>

<p>ì•„ë˜ì—ì„œ ì„¤ëª…í•  ì˜ˆì‹œ í™˜ê²½ì€ ë‹¤ìŒê³¼ ê°™ì´ ì§€ì •í•˜ì.</p>

<p><br />
WLS11gR1 :</p>

<p>- ì˜¤ë¼í´ ì œí’ˆ í™ˆ (ORACLE_HOME) : /sw/weblogic/11gR1</p>

<p>- ì›¹ë¡œì§ ì—”ì§„ í™ˆ (WL_HOME) : /sw/weblogic/11gR1/wlserver_10.3</p>

<p><br />
WLS12cR1 :</p>

<p>- ì˜¤ë¼í´ ì œí’ˆ í™ˆ (ORACLE_HOME) : /sw/weblogic/12cR1</p>

<p>- ì›¹ë¡œì§ ì—”ì§„ í™ˆ (WL_HOME) : /sw/weblogic/12cR1/wlserver</p>

<p><br />
ìœ„ì—ì„œ ë§í•œ ORACLE_HOME ë°±ì—… í•˜ë ¤ê³  í•˜ë©´,</p>

<p>ëŒ€ê²Œ DOMAIN_HOME (ì›¹ë¡œì§ ë„ë©”ì¸) ì´ ì•„ë˜ì— ê°™ì´ ìœ„ì¹˜í•œ ê²½ìš°ê°€ ìˆìœ¼ë¯€ë¡œ,</p>

<p>ë‹¤ìŒì˜ ëª…ë ¹ì–´ë¡œ ë°±ì—…ì„ í•˜ì.</p>

<p><br />
ì˜ˆ) 12cR1 ì˜ DOMAIN_HOMEì„ ì œì™¸í•œ, ORACLE_HOME ë°±ì—…</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">mkdir</span> /backupdir
<span class="nb">cp</span> <span class="nt">-pR</span> <span class="sb">`</span><span class="nb">ls</span> /sw/weblogic/12cR1 | <span class="nb">grep</span> <span class="nt">-v</span> <span class="s2">"domains"</span><span class="sb">`</span> /backupdir
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>
<h2 id="3-bsu">3. BSU</h2>

<ul>
  <li>bsu.sh ì˜ ìµœëŒ€ Heap MemoryëŠ” 2GB ì´ìƒ ëŠ˜ë ¤ì£¼ì–´ì•¼ OOME ë¥¼ í”¼í•œë‹¤.</li>
  <li>HP ì¥ë¹„ì—ì„œëŠ” <code class="language-plaintext highlighter-rouge">MEM_ARGS="-d64"</code>ì˜µì…˜ì„ ì¶”ê°€í•œë‹¤.</li>
</ul>

<p><br /></p>
<h3 id="31-command">3.1 command</h3>

<ul>
  <li>
    <p>íŒ¨ì¹˜ ì„¤ì¹˜/ì‚­ì œ/í™•ì¸ ëª…ë ¹ì–´ëŠ” ë‹¤ìŒì˜ ê° ì¤„ì— ëŒ€ì‘í•œë‹¤.</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>./bsu.sh <span class="nt">-install</span> <span class="nt">-verbose</span> <span class="nt">-patch_download_dir</span><span class="o">=</span>./cache_dir <span class="nt">-patchlist</span><span class="o">=</span>RVBS <span class="nt">-prod_dir</span><span class="o">=</span>../../wlserver_10.3 <span class="nt">-log</span><span class="o">=</span>../install_DEM4.log
  
./bsu.sh <span class="nt">-remove</span> <span class="nt">-verbose</span> <span class="nt">-patchlist</span><span class="o">=</span>RVBS <span class="nt">-prod_dir</span><span class="o">=</span>../../wlserver_10.3 <span class="nt">-log</span><span class="o">=</span>../remove_RVBS.log
  
./bsu.sh <span class="nt">-status</span><span class="o">=</span>applied <span class="nt">-view</span> <span class="nt">-verbose</span> <span class="nt">-prod_dir</span><span class="o">=</span>../../wlserver_10.3
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
</ul>

<blockquote>
  <p>BSU íŒ¨ì¹˜ëŠ” ì¼ë°˜ì ìœ¼ë¡œ 1ì‹œê°„ ì¡ê³  ì§„í–‰í•  ì •ë„ë¡œ, ëŠë¦¬ë©° ì•„ë˜ì—ì„œ BSU íˆ´ì„ Patch í•˜ë©´ ë¹¨ë¼ì§„ë‹¤.</p>
</blockquote>

<p><br /></p>
<h3 id="32-bsu-tool-patch">3.2 BSU Tool Patch</h3>

<ul>
  <li>
    <p>WebLogic 10.3.6 ì´í•˜ì˜ ë²„ì „ë“¤ì€ BSU ë¥¼ 3.3ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë¥¼ ì‚¬ì „ì— ì§„í–‰í•´ì•¼ í•œë‹¤.</p>
  </li>
  <li>
    <p>ì•„ë˜ íŒ¨ì¹˜ë¥¼ ì ìš©í•˜ë©´, ì¶©ëŒ ê²€ì‚¬ê°€ ë¹¨ë¼ì§„ë‹¤.</p>
  </li>
  <li>
    <p>Enhancement for WLS BSU (Smart Update): Resolves Very Long Time to Apply Patches - Especially When Checking for Patch Conflicts (ë¬¸ì„œ ID 2271366.1)</p>

    <ul>
      <li>
        <p>íŒ¨ì¹˜íŒŒì¼: íŒ¨ì¹˜ 27238412: SMART UPDATE TOOL ENHANCEMENT V3</p>

        <blockquote>
          <p>ìœ„ ë¬¸ì„œì—ì„œ, 3.3 Bsu ì—…ë°ì´íŠ¸ ë°©ë²•ë„ ì œê³µí•œë‹¤.</p>

          <p>3.3 BSU(11gëŠ” ê¸°ë³¸ì ìœ¼ë¡œ 3.3 BSU) íŒ¨ì¹˜ ì´í›„ì—ëŠ”,</p>

          <p>bsu_update íŒ¨ì¹˜ë¥¼ ë°›ì•„ bsu ë””ë ‰í† ë¦¬ì— ë„£ê³  ./bsu_update.sh ì„ ì‹¤í–‰í•˜ë©´ ëë‚œë‹¤.</p>

          <p>( ìœ„ ì‰˜ìŠ¤í¬ë¦½íŠ¸ëŠ”, ì—”ì§„ì— jarë¥¼ ë³µì‚¬í•˜ëŠ” ì‘ì—…ë§Œ ì§„í–‰í•˜ë¯€ë¡œ 1ì´ˆì´ë‚´ ë. )</p>
        </blockquote>
      </li>
    </ul>
  </li>
</ul>

<h2 id="4-opatch">4. OPatch</h2>

<h4 id="41-recovery-orainventory">4.1 Recovery oraInventory</h4>

<ul>
  <li>
    <p>OPatch ì§„í–‰ì„ í•˜ëŠ” ê²½ìš°, oraInventory(íŒ¨ì¹˜ ì •ë³´ë¥¼ ë‹´ê³  ìˆëŠ” ë””ë ‰í† ë¦¬) ì†ìƒ ë˜ëŠ” ì‚­ì œëœ ê²½ìš°ê°€ ìˆì–´ ë³µêµ¬í•˜ëŠ” ë°©ë²•ë„ í•„ìš”í•˜ë‹¤.</p>

    <pre><code class="language-oraInst.loc"># oraInst.loc íŒŒì¼ì˜ ë‚´ìš©
inventory_loc=/sw/weblogic/oraInventory_12cR1
# group name of os account
group=app
</code></pre>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>./attachHome.sh <span class="nt">-invPtrLoc</span> oraInst.loc
</pre></td></tr></tbody></table></code></pre></div>    </div>

    <blockquote>
      <p>ê±°ì˜ 1ë¶„ ì´ë‚´ì— ì € ê²½ë¡œ ì¸ë²¤í† ë¦¬ë¥¼ ìƒì„±í•´ì¤€ë‹¤.</p>
    </blockquote>
  </li>
</ul>

<p><br /></p>
<h4 id="42-command">4.2 command</h4>

<ul>
  <li>
    <p>íŒ¨ì¹˜ ì„¤ì¹˜/ì‚­ì œ/í™•ì¸ ëª…ë ¹ì–´ëŠ” ë‹¤ìŒì˜ ê° ì¤„ì— ëŒ€ì‘í•œë‹¤.</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>./opatch apply 27419391 <span class="nt">-jdk</span> /opt/java7 <span class="nt">-invPtrLoc</span> <span class="nv">$ORACLE_HOME</span>/oraInst.loc <span class="nt">-oh</span> <span class="nv">$ORACLE_HOME</span>
  
./opatch rollback <span class="nt">-id</span> 27419391 <span class="nt">-jdk</span> /opt/java7 <span class="nt">-invPtrLoc</span> <span class="nv">$ORACLE_HOME</span>/oraInst.loc <span class="nt">-oh</span> <span class="nv">$ORACLE_HOME</span>
  
./opatch lsinventory <span class="nt">-jdk</span> /opt/java7 <span class="nt">-invPtrLoc</span> <span class="nv">$ORACLE_HOME</span>/oraInst.loc <span class="nt">-oh</span> <span class="nv">$ORACLE_HOME</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>

    <p>ìœ„ì— -jdk, invPtrLoc, -oh ì˜µì…˜ì„ ì“°ëŠ” ì´ìœ ëŠ” OPatch íˆ´ì´ ì•Œê³  ìˆëŠ” ì •ë³´ì™€ ë‹¤ë¥¸ ê²½ìš° ë‹¤ë¥¸ íŒ¨ì¹˜ ê²½ë¡œë¥¼ ë°”ë¼ë³´ê¸° ë•Œë¬¸ì— ì§ì ‘ ê³ ì •í•´ì£¼ëŠ”ë° ì‚¬ìš©ëœë‹¤.</p>

    <p>ë³´í†µ jdkëŠ” ê·¸ë ‡ì§€ ì•Šì§€ë§Œ, invPtrLocë‚˜ oh ì˜ ê²½ìš°ëŠ” ë‹¤ë¥¸ ì˜¤ë¼í´ ì œí’ˆì´ ì›¹ë¡œì§ ì´í›„ì— ì„¤ì¹˜ë˜ë©´ ë°”ë€” ìˆ˜ ìˆë‹¤.</p>

    <p>ì™œëƒ? ê³µì‹ë¬¸ì„œë¥¼ ë³´ë‹ˆ,</p>

    <p>Unix ê¸°ì¤€ìœ¼ë¡œ /var/lib/oraInst.loc ë¥¼ ì›¹ë¡œì§ì˜ OPatch íˆ´ì´ ì‹¤í–‰ë˜ë©´ ê°€ì¥ ë¨¼ì € ì½ì–´ë³´ëŠ” íŒŒì¼ì´ë¼ê³  í•œë‹¤.</p>

    <p>ê·¼ë°, ì‹¤ì œë¡œ ë‹¤ë¥¸ ì˜¤ë¼í´ ì œí’ˆì´ ì´í›„ì— ì„¤ì¹˜ë˜ë©´ì„œ ìœ„ íŒŒì¼ì´ ë‹¤ë¥¸ ê²½ë¡œë¡œ ë°”ê¾¸ì–´ ë²„ë ¸ë‹¤.</p>

    <p>ì´ëŸ° ì‚¬ì†Œí•˜ì§€ë§Œ ë°œìƒí•˜ë©´ ì ˆëŒ€ ì°¾ì„ ìˆ˜ ì—†ì„ê²ƒ ê°™ì€ ì´ìŠˆë¥¼ ìœ„í•´ ìœ„ ì˜µì…˜ ì‚¬ìš©ì„ ìŠµê´€í™” í•´ì•¼ í•œë‹¤.</p>
  </li>
</ul>

<p><br /></p>
<h4 id="42-opatch-tool-patch">4.2 OPatch Tool Patch</h4>

<ul>
  <li>
    <p>12cR2 psu 17ë…„ ì¤‘ìˆœ?? ë¶€í„° OPatch 13.9.2.0.0 ì„ 13.9.4.0.0 ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œ í•´ì•¼ í•œë‹¤.</p>
  </li>
  <li>
    <p>íŒ¨ì¹˜íŒŒì¼ : Using OUI NextGen OPatch 13 for Oracle Fusion Middleware 12c (ë¬¸ì„œ ID 1587524.1)</p>

    <blockquote>
      <p>ìœ„ ë¬¸ì„œ ë„ì… ë¶€ë¶„ì— <a href="https://support.oracle.com/epmos/faces/ui/patch/PatchDetail.jspx?parent=DOCUMENT&amp;sourceId=1587524.1&amp;patchId=28186730">Patch 28186730</a> ì„ ì•ˆë‚´í•˜ê³  ìˆìŒ</p>
    </blockquote>
  </li>
</ul>

<p><br /></p>
<h2 id="5-trouble-shooting">5. Trouble Shooting</h2>

<ul>
  <li>ì•„ë˜ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…ì€, ì‹¤ì œ ê³ ê°ì‚¬ OPatch ì—ëŸ¬ë¥¼ ì •ë¦¬í•˜ì˜€ë‹¤.</li>
</ul>

<p><br /></p>
<h3 id="51-ê¸°ì¡´-íŒ¨ì¹˜-ë¡¤ë°±-ì‹œ">5.1 ê¸°ì¡´ íŒ¨ì¹˜ ë¡¤ë°± ì‹œ</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>---------------------------
# ê¸°ì¡´ íŒ¨ì¹˜ ë¡¤ë°± ì‹œ, ì•„ë˜ ì—ëŸ¬ ë°œìƒ ë°
# íŒ¨ì¹˜ íŒŒì¼ not found class(file) ë˜ëŠ” not readable ë“±ì˜ ì—ëŸ¬
--------------------------

Recommended actions: OPatch won't be able to roll back the given patch. A common reason is there are other patches that depend on this patch. You need to roll back those dependent patches before you can roll back this patch.

OPatch failed with error code 43
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ìœ„ ë¬¸ë§¥ìƒ, ì¢…ì†ì ì¸ ë‹¤ë¥¸ íŒ¨ì¹˜ê°€ ìˆìœ¼ë‹ˆ ê·¸ê²ƒë¶€í„° ì§€ìš°ë¼ëŠ” ê±°ì§€ë§Œ.. ëŒ€ê²Œ ì•„ë˜ ë¬¸ì„œì™€ ê°™ì€ ë“¯í•˜ë‹¤.</p>

<p>Error â€œPrerequisite check CheckRollbackable on auto-rollback patches failedâ€ When Applying Patch (ë¬¸ì„œ ID 1582100.1) ë¬¸ì„œë¥¼ í™•ì¸í•œë‹¤.</p>

<p>ORACLE_HOME/.patch_storage ì•„ë˜ì—ëŠ” ì›¹ë¡œì§ì— ê±¸ë ¤ ìˆëŠ” íŒ¨ì¹˜ ë””ë ‰í† ë¦¬ê°€ ìˆìœ¼ë©°, ì¼ë¶€ íŒŒì¼ì´ ëˆ„ë½ë˜ì–´ ìˆì–´ ë°œìƒí•œ ë¬¸ì œë‹¤. /etc , /files ë¥¼ í†µì§¸ë¡œ ë„£ì–´ì¤€ë‹¤.</p>

<blockquote>
  <p>patch_storage í´ë” ë³µêµ¬ ë°©ë²•ì€ ì—†ìŒ</p>
</blockquote>

<p><br /></p>
<h3 id="52-ì‹ ê·œ-íŒ¨ì¹˜-ì ìš©-ì‹œ">5.2 ì‹ ê·œ íŒ¨ì¹˜ ì ìš© ì‹œ</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre>[ Error during Update inventory for apply Phase]. Detail: OPatch failed: ApplySession failed in system modification phase... 'ApplySession::apply failed: Check if library regeneration is needed with error message: com.oracle.cie.gdr.libraries.LibraryException: com.oracle.cie.gdr.utils.GdrException: Failed to apply xml diff to component definition /weblogic/wlserver/inventory/Components/oracle.wls.libraries/12.1.3.0.0/compDef.xml'

OPatch will attempt to restore the system...

Restoring the Oracle Home...

Checking if OPatch needs to invoke 'make' to restore some binaries...

OPatch was able to restore your system. Look at log file and timestamp of each file to make sure your system is in the state prior to applying the patch.

Log file location: /weblogic/wlserver/cfgtoollogs/opatch/27419391_Jul_10_2018_12_16_42/apply2018-07-10_12-16-34PM_1.log
</pre></td></tr></tbody></table></code></pre></div></div>

<p>opatch ê°€ compDef.xml ë¡œ í˜„ì¬ ì›¹ë¡œì§ê³¼ íŒ¨ì¹˜ íŒŒì¼ ë¹„êµë¥¼ ìˆ˜í–‰í•´ì•¼ í•˜ë‚˜, xml íŒŒì¼ì´ ì—†ì–´ ë°œìƒí•˜ëŠ” ë¬¸ì œ.</p>

<p>ë‹¤ë¥¸ ë²„ê·¸ ë“±ìœ¼ë¡œ ë°œìƒí•  ìˆ˜ ìˆìœ¼ë‚˜ ëŒ€ê²ŒëŠ”, íŒŒì¼ì´ ì—†ëŠ” ê²½ìš°ì´ë©°</p>

<p>ë¬¸ì„œë¥¼ í™•ì¸í•œë‹¤. (XXì €ì¶•ì€ solution 2ë²ˆì— í•´ë‹¹ë˜ì—ˆìŒ)</p>

<p><br />
OPatch apply or rollback fails with com.oracle.cie.gdr.libraries.LibraryException: com.oracle.cie.gdr.utils.GdrException: Failed to apply xml diff to component definition error in WebLogic PSU (ë¬¸ì„œ ID 2088228.1)</p>
:ET