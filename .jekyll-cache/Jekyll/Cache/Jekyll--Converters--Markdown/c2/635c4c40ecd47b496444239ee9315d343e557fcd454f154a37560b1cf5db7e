I"±<p><br /># 1. ê°œìš”</p>

<p>OCI(Oracle Call Interface)</p>

<p>SQL<em>Plus, SQL</em>Developerì™€ ê°™ì€ oracle db ì ‘ì† íˆ´ì´ oci ì„.</p>

<p>ociëŠ” native libraryë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ, pure javaì¸ thin ë°©ì‹ë³´ë‹¤ ë” ë¹ ë¥´ë‹¤ê³  í•œë‹¤.</p>

<p>support.oracleì— oci ì‚¬ìš© ì‹œ weblogic jvm crash, not closed ì‚¬ë¡€ì™€ ê°™ì€ ë¬¸ì„œ í˜¹ì€ íŒ¨ì¹˜ ë‚´ìš©ì´ ìˆìœ¼ë©°, thin ë°©ì‹ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•œë‹¤ê³  ì„¤ëª…í•œë‹¤.</p>

<blockquote>
  <p>WLS JDBC Pool - Physical Connections are not closed by Weblogic JDBC Datasource using OCI driver (Doc ID 1928018.1)</p>

  <p>WebLogic Server Crash Observed When Using Oracle OCI JDBC Driver (Doc ID 889840.1)</p>
</blockquote>

<p><br /></p>
<h2 id="2-ì„¤ëª…">2. ì„¤ëª…</h2>

<h3 id="21-oci-ë¥¼-ì‚¬ìš©í•˜ëŠ”-datasource-ìƒì„±-ë°©ë²•">2.1 OCI ë¥¼ ì‚¬ìš©í•˜ëŠ” Datasource ìƒì„± ë°©ë²•.</h3>

<h4 id="1-oci-library-installation">(1). OCI Library installation</h4>

<p>WebLogic ì´ ì„¤ì¹˜ëœ OSì— OCIê°€ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•œë‹¤.</p>

<p>OCIê°€ ì„¤ì¹˜ë˜ì–´ì•¼ í•„ìš”í•œ native libraryê°€ ì„¤ì¹˜ë˜ë©°, LD_LIBRARY_PATHì™€ ê°™ì€ os í™˜ê²½ ë³€ìˆ˜ì— oci library pathê°€ ì„¤ì •ë˜ê¸° ë•Œë¬¸ì´ë‹¤.</p>

<p>OCI ëŠ” ë‹´ë‹¹ìê°€ ì‚¬ìš©í•˜ëŠ” toolì´ë¯€ë¡œ ë‹´ë‹¹ìê°€ ë¯¸ë¦¬ ì„¤ì¹˜ë¥¼ ë°˜ë“œì‹œ í•´ë†“ì•„ì•¼ í•˜ë©°, ì„¤ì¹˜ë¥¼ í•˜ì§€ ì•Šì€ osì˜ ê²½ìš° oci library íŒŒì¼ì„ ë°›ì•„ ftp upload í•´ë†“ì•„ì•¼ í•œë‹¤.</p>

<p><br />
<a href="http://www.oracle.com/technetwork/database/features/instant-client/index-097480.html">ì—¬ê¸°</a> ì—ì„œ oci libì„ ë‹¤ìš´ë¡œë“œ ë°›ëŠ”ë‹¤.</p>

<blockquote>
  <p>ì˜ˆ) instantclient-basic-linux.x64-11.2.0.4.0.zip ì„ /home/weblogic/was/1213/domains/lib/instantclient_11_2 ì••ì¶• í•´ì œ</p>
</blockquote>

<p>ì—¬ê¸°ì„œëŠ”, OCIê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•Šì€ ì„œë²„ì— oci libraryë§Œìœ¼ë¡œ oci datasource êµ¬ì„± ë°©ë²•ì„ ì„¤ëª…í•œë‹¤.</p>

<p><br /></p>
<h4 id="2-setup-instance">(2). setup instance</h4>

<ul>
  <li>AdminServerì™€ OCIë¥¼ ì‚¬ìš©í•  ManagedServer ëª¨ë‘ ì ìš©í•œë‹¤.</li>
</ul>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre>...skip...

<span class="nb">export </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="s2">"/home/weblogic/was/1213/domains/lib/instantclient_11_2:</span><span class="k">${</span><span class="nv">LD_LIBRARY_PTH</span><span class="k">}</span><span class="s2">"</span>

<span class="nb">export </span><span class="nv">JAVA_OPTIONS</span><span class="o">=</span><span class="s2">"-Djava.library.path=/home/weblogic/was/1213/domains/lib/instantclient_11_2 </span><span class="k">${</span><span class="nv">JAVA_OPTIONS</span><span class="k">}</span><span class="s2">"</span>

...skip...
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>
<ul>
  <li>
    <p>ìœ„ì—ì„œ ë°›ì€ ociëŠ” 11gì´ë¯€ë¡œ, ojdbc driverë„ 11gì´ì–´ì•¼ í•œë‹¤.</p>

    <p><code class="language-plaintext highlighter-rouge">/home/weblogic/was/1213/domains/lib/instantclient_11_2/ojdbc6.jar ë¥¼ domains/lib ì— ë³µì‚¬í•´ë‘”ë‹¤.</code></p>
  </li>
</ul>

<p><br /></p>
<h4 id="3-datasource-url">(3). datasource url</h4>

<ul>
  <li>JDBC ìƒì„± ì‹œ connect urlì€ oci ë¼ëŠ” ê¸€ìë§Œ ë“¤ì–´ê°€ê³  ë‚˜ë¨¸ì§€ëŠ” thin ê³¼ ëª¨ë‘ ë™ì¼í•˜ë‹¤.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">jdbc:oracle:oci:host:port:sid </code></li>
    </ul>
  </li>
</ul>

<p><br /></p>
<h4 id="4-ì„¤ì •-ì‹œ-ì—ëŸ¬ê°€-ë°œìƒí•œë‹¤ë©´">(4). ì„¤ì • ì‹œ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤ë©´</h4>

<ul>
  <li>
    <p>ì ìš©í•˜ë ¤ëŠ” oci ë²„ì „ê³¼ ojdbc ë²„ì „ì´ ë™ì¼í•œì§€ í™•ì¸í•œë‹¤. (oci version 11gì´ë©´ ojdbc ë„ 11gì´ì–´ì•¼ í•œë‹¤. oci library ë””ë ‰í† ë¦¬ì˜ ojdbc.jar ë¥¼ ì‚¬ìš©í•œë‹¤ë©´ í•´ê²°ë˜ëŠ” ë¬¸ì œ)</p>
  </li>
  <li>
    <p>LD_LIâ€¦.ì™€ Djava.libâ€¦ ì˜µì…˜ ì ìš© ì—¬ë¶€ë¥¼ í™•ì¸í•œë‹¤.</p>
  </li>
  <li>
    <p>ì£¼ë¡œ ë°œìƒí•˜ëŠ” ì—ëŸ¬ì™€ ê°€ì´ë“œì— ëŒ€í•œ ë¬¸ì„œëŠ”</p>

    <blockquote>
      <p>java.lang.UnsatisfiedLinkError: no ocijdbc11 in java.library.path with WebLogic 12c (Doc ID 1914466.1)</p>

      <p>How To Configure JDBC OCI In Weblogic?(Doc ID 1917164.1)</p>
    </blockquote>
  </li>
</ul>
:ET