I"Öu<h2 id="1-ê°œìš”">1. ê°œìš”</h2>

<p>ê³ ê°ì‚¬ ì‹œìŠ¤í…œ ì •ë³´ ì¶”ì¶œì„ ìœ„í•´ ë§Œë“  ìŠ¤í¬ë¦½íŠ¸</p>

<h2 id="2-ì¸ìŠ¤í„´ìŠ¤-ì •ë³´">2. ì¸ìŠ¤í„´ìŠ¤ ì •ë³´</h2>

<h3 id="21-ì¸ìŠ¤í„´ìŠ¤ëª…">2.1 ì¸ìŠ¤í„´ìŠ¤ëª…</h3>

<h4 id="1-server-tag-ë²”ìœ„-ê²€ìƒ‰">(1). server tag ë²”ìœ„ ê²€ìƒ‰</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="nv">$ </span>egrep <span class="s2">"&lt;server&gt;|&lt;</span><span class="se">\/</span><span class="s2">server&gt;"</span> config.xml <span class="nt">-n</span>
44:  &lt;server&gt;
76:  &lt;/server&gt;
77:  &lt;server&gt;
136:  &lt;/server&gt;
137:  &lt;server&gt;
157:  &lt;/server&gt;
158:  &lt;server&gt;
213:  &lt;/server&gt;
</pre></td></tr></tbody></table></code></pre></div></div>

<h4 id="2-sed-ëª…ë ¹ìœ¼ë¡œ-ë²”ìœ„-ì¶œë ¥">(2). sed ëª…ë ¹ìœ¼ë¡œ ë²”ìœ„ ì¶œë ¥</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
</pre></td><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sed</span> <span class="nt">-n</span> 44,76p config.xml
  &lt;server&gt;
    &lt;name&gt;AdminServer&lt;/name&gt;
    &lt;log&gt;
      &lt;date-format-pattern&gt;yyyy. M. d a h<span class="s1">'ì‹œ'</span> mm<span class="s1">'ë¶„'</span> ss,SSS<span class="s1">'ì´ˆ'</span> z&lt;/date-format-pattern&gt;
      &lt;file-name&gt;logs/AdminServer.log&lt;/file-name&gt;
      &lt;rotation-type&gt;byTime&lt;/rotation-type&gt;
      &lt;number-of-files-limited&gt;true&lt;/number-of-files-limited&gt;
      &lt;file-count&gt;100&lt;/file-count&gt;
      &lt;file-time-span&gt;24&lt;/file-time-span&gt;
      &lt;rotation-time&gt;00:00&lt;/rotation-time&gt;
      &lt;rotate-log-on-startup&gt;false&lt;/rotate-log-on-startup&gt;
      &lt;buffer-size-kb&gt;8&lt;/buffer-size-kb&gt;
      &lt;logger-severity&gt;Info&lt;/logger-severity&gt;
      &lt;log-file-severity&gt;Info&lt;/log-file-severity&gt;
      &lt;stdout-severity&gt;Info&lt;/stdout-severity&gt;
      &lt;stdout-format&gt;standard&lt;/stdout-format&gt;
      &lt;stdout-log-stack&gt;true&lt;/stdout-log-stack&gt;
      &lt;stacktrace-depth&gt;5&lt;/stacktrace-depth&gt;
      &lt;domain-log-broadcast-severity&gt;Off&lt;/domain-log-broadcast-severity&gt;
      &lt;redirect-stdout-to-server-log-enabled&gt;false&lt;/redirect-stdout-to-server-log-enabled&gt;
      &lt;redirect-stderr-to-server-log-enabled&gt;false&lt;/redirect-stderr-to-server-log-enabled&gt;
      &lt;domain-log-broadcaster-buffer-size&gt;10&lt;/domain-log-broadcaster-buffer-size&gt;
      &lt;log-monitoring-enabled&gt;true&lt;/log-monitoring-enabled&gt;
      &lt;log-monitoring-interval-secs&gt;30&lt;/log-monitoring-interval-secs&gt;
      &lt;log-monitoring-throttle-threshold&gt;1500&lt;/log-monitoring-throttle-threshold&gt;
      &lt;log-monitoring-throttle-message-length&gt;50&lt;/log-monitoring-throttle-message-length&gt;
      &lt;log-monitoring-max-throttle-message-signature-count&gt;1000&lt;/log-monitoring-max-throttle-message-signature-count&gt;
    &lt;/log&gt;
    &lt;listen-port&gt;8001&lt;/listen-port&gt;
    &lt;listen-address&gt;was.test.com&lt;/listen-address&gt;
    &lt;server-life-cycle-timeout-val&gt;30&lt;/server-life-cycle-timeout-val&gt;
    &lt;startup-timeout&gt;0&lt;/startup-timeout&gt;
  &lt;/server&gt;
</pre></td></tr></tbody></table></code></pre></div></div>

<h4 id="3--ì¸ìŠ¤í„´ìŠ¤ëª…ì€-ë²”ìœ„ì˜-í•­ìƒ-ë‘ë²ˆì§¸ì—-ì´ë¦„ì„-ê°–ëŠ”ë‹¤">(3).  ì¸ìŠ¤í„´ìŠ¤ëª…ì€ ë²”ìœ„ì˜ í•­ìƒ ë‘ë²ˆì§¸ì— ì´ë¦„ì„ ê°–ëŠ”ë‹¤.</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sed</span> <span class="nt">-n</span> 44,76p config.xml | <span class="nb">sed</span> <span class="nt">-n</span> <span class="nt">-e</span> 2p
    &lt;name&gt;AdminServer&lt;/name&gt;
</pre></td></tr></tbody></table></code></pre></div></div>

<h4 id="4-ì¸ìŠ¤í„´ìŠ¤ëª…ë§Œ-ë„ì§‘ì–´-ë‚´ë„ë¡-name-tag-ê±¸ëŸ¬ë‚´ê¸°">(4). ì¸ìŠ¤í„´ìŠ¤ëª…ë§Œ ë„ì§‘ì–´ ë‚´ë„ë¡ name tag ê±¸ëŸ¬ë‚´ê¸°</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sed</span> <span class="nt">-n</span> 44,76p config.xml | <span class="nb">sed</span> <span class="nt">-n</span> <span class="nt">-e</span> 2p | <span class="nb">sed</span> <span class="nt">-s</span> <span class="s2">"s/&lt;name&gt;//"</span> | <span class="nb">sed</span> <span class="nt">-s</span> <span class="s2">"s/&lt;</span><span class="se">\/</span><span class="s2">name&gt;//"</span>
    AdminServer
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="22-ì¸ìŠ¤í„´ìŠ¤-ì£¼ì†Œ">2.2 ì¸ìŠ¤í„´ìŠ¤ ì£¼ì†Œ</h3>

<h4 id="1-listen-addressì™€-listen-portë§Œ-ê²€ìƒ‰í•˜ë©´-ëœë‹¤">(1). listen-addressì™€ listen-portë§Œ ê²€ìƒ‰í•˜ë©´ ëœë‹¤.</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sed</span> <span class="nt">-n</span> 44,76p config.xml | egrep <span class="s2">"listen-address|listen-port"</span>
    &lt;listen-port&gt;8001&lt;/listen-port&gt;
    &lt;listen-address&gt;was.test.com&lt;/listen-address&gt;
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="23-í†µí•©-ì„œë²„-ì •ë³´-ì¶œë ¥í•˜ê¸°">2.3 (í†µí•©) ì„œë²„ ì •ë³´ ì¶œë ¥í•˜ê¸°</h3>

<ul>
  <li>â€œ1. server tag ë²”ìœ„ ê²€ìƒ‰â€ ì— head, tail ì¡°í•©í•˜ì—¬ ê²€ìƒ‰ ë²”ìœ„ë¥¼ íŠ¹ì •ì‹œí‚¨ë‹¤.</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre><span class="nv">PAGE_RANGE</span><span class="o">=</span><span class="si">$(</span>egrep <span class="s2">"&lt;server&gt;|&lt;</span><span class="se">\/</span><span class="s2">server&gt;"</span> config.xml <span class="nt">-n</span> | <span class="nb">cut</span> <span class="nt">-d</span> <span class="s1">':'</span> <span class="nt">-f1</span><span class="si">)</span>
<span class="nv">PAGE_COUNT</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="k">${</span><span class="nv">PAGE_RANGE</span><span class="k">}</span><span class="s2">"</span> | <span class="nb">wc</span> <span class="nt">-l</span><span class="si">)</span>

<span class="k">for</span> <span class="o">((</span><span class="nv">idx</span><span class="o">=</span>1<span class="p">;</span> idx&lt;<span class="o">=</span>PAGE_COUNT<span class="p">;</span> <span class="nv">idx</span><span class="o">=</span>idx+2<span class="o">))</span>
<span class="k">do
	</span><span class="nv">HERE</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="k">${</span><span class="nv">PAGE_RANGE</span><span class="k">}</span><span class="s2">"</span> | <span class="nb">head</span> <span class="nt">-n</span> <span class="k">${</span><span class="nv">idx</span><span class="k">}</span> | <span class="nb">tail</span> <span class="nt">-1</span><span class="si">)</span>
	<span class="nv">NEXT</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="k">${</span><span class="nv">PAGE_RANGE</span><span class="k">}</span><span class="s2">"</span> | <span class="nb">head</span> <span class="nt">-n</span> <span class="k">$((</span>idx+1<span class="k">))</span> | <span class="nb">tail</span> <span class="nt">-1</span><span class="si">)</span>
	
	<span class="nv">INSTANCE_NAME</span><span class="o">=</span><span class="si">$(</span><span class="nb">sed</span> <span class="nt">-n</span> <span class="k">${</span><span class="nv">HERE</span><span class="k">}</span>,<span class="k">${</span><span class="nv">NEXT</span><span class="k">}</span>p config.xml | <span class="nb">sed</span> <span class="nt">-n</span> <span class="nt">-e</span> 2p | <span class="nb">sed</span> <span class="s1">'s/ //g'</span><span class="si">)</span>
	<span class="nv">INSTANCE_ADDR</span><span class="o">=</span><span class="si">$(</span><span class="nb">sed</span> <span class="nt">-n</span> <span class="k">${</span><span class="nv">HERE</span><span class="k">}</span>,<span class="k">${</span><span class="nv">NEXT</span><span class="k">}</span>p config.xml | egrep <span class="s2">"listen-address|listen-port"</span> | <span class="nb">sed</span> <span class="s1">'s/ //g'</span><span class="si">)</span>
	
	<span class="nb">echo</span> <span class="s2">"
	########## start ##########"</span>
	<span class="nb">echo</span> <span class="s2">"ì¸ìŠ¤í„´ìŠ¤ : </span><span class="k">${</span><span class="nv">INSTANCE_NAME</span><span class="k">}</span><span class="s2">"</span>
	<span class="nb">echo</span> <span class="s2">"ì£¼ì†Œ : </span><span class="k">${</span><span class="nv">INSTANCE_ADDR</span><span class="k">}</span><span class="s2">"</span>
	<span class="nb">echo</span> <span class="s2">"########## end ##########
	"</span>
<span class="k">done</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="/../assets/posts/images/01-WebLogic/GetConfigBash/GetConfigBash_1.png" alt="GetConfigBash_1" /></p>

<h2 id="3-ë°°í¬-app-ì •ë³´">3. ë°°í¬ App ì •ë³´</h2>

<h3 id="31-app-ì´ë¦„">3.1 App ì´ë¦„</h3>

<h4 id="1-app-deployment-tag-ë²”ìœ„-ê²€ìƒ‰">(1). app-deployment tag ë²”ìœ„ ê²€ìƒ‰</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="nv">$ </span>egrep <span class="s2">"&lt;app-deployment&gt;|&lt;</span><span class="se">\/</span><span class="s2">app-deployment&gt;"</span> config.xml <span class="nt">-n</span>
237:  &lt;app-deployment&gt;
246:  &lt;/app-deployment&gt;
247:  &lt;app-deployment&gt;
256:  &lt;/app-deployment&gt;
</pre></td></tr></tbody></table></code></pre></div></div>

<h4 id="2-sed-ëª…ë ¹ìœ¼ë¡œ-ë²”ìœ„-ì¶œë ¥-1">(2). sed ëª…ë ¹ìœ¼ë¡œ ë²”ìœ„ ì¶œë ¥</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sed</span> <span class="nt">-n</span> 237,246p config.xml
  &lt;app-deployment&gt;
    &lt;name&gt;webapp&lt;/name&gt;
    &lt;target&gt;myCluster_1&lt;/target&gt;
    &lt;module-type&gt;war&lt;/module-type&gt;
    &lt;source-path&gt;/usr/ssw/Applications/webapp&lt;/source-path&gt;
    &lt;security-dd-model&gt;DDOnly&lt;/security-dd-model&gt;
    &lt;staging-mode&gt;nostage&lt;/staging-mode&gt;
    &lt;plan-staging-mode&gt;nostage&lt;/plan-staging-mode&gt;
    &lt;cache-in-app-directory&gt;false&lt;/cache-in-app-directory&gt;
  &lt;/app-deployment&gt;
</pre></td></tr></tbody></table></code></pre></div></div>

<h4 id="3-ì–´í”Œë¦¬ì¼€ì´ì…˜ëª…ì€-ë²”ìœ„ì˜-í•­ìƒ-ë‘ë²ˆì§¸ì—-ì´ë¦„ì„-ê°–ëŠ”ë‹¤">(3). ì–´í”Œë¦¬ì¼€ì´ì…˜ëª…ì€ ë²”ìœ„ì˜ í•­ìƒ ë‘ë²ˆì§¸ì— ì´ë¦„ì„ ê°–ëŠ”ë‹¤.</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sed</span> <span class="nt">-n</span> 237,246p config.xml | <span class="nb">sed</span> <span class="nt">-n</span> <span class="nt">-e</span> 2p
    &lt;name&gt;webapp&lt;/name&gt;
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="32-app-ë°°í¬-target">3.2 App ë°°í¬ Target</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sed</span> <span class="nt">-n</span> 237,246p config.xml | <span class="nb">grep</span> <span class="s2">"target"</span>
    &lt;target&gt;myCluster_1&lt;/target&gt;
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="33-app-source-path">3.3 App Source Path</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sed</span> <span class="nt">-n</span> 237,246p config.xml | <span class="nb">grep</span> <span class="s2">"source-path"</span>
    &lt;source-path&gt;/usr/ssw/Applications/webapp&lt;/source-path&gt;
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="34-í†µí•©-app-ì •ë³´-ì¶œë ¥í•˜ê¸°">3.4 (í†µí•©) App ì •ë³´ ì¶œë ¥í•˜ê¸°</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre></td><td class="rouge-code"><pre><span class="nv">PAGE_RANGE</span><span class="o">=</span><span class="si">$(</span>egrep <span class="s2">"&lt;app-deployment&gt;|&lt;</span><span class="se">\/</span><span class="s2">app-deployment&gt;"</span> config.xml <span class="nt">-n</span> | <span class="nb">cut</span> <span class="nt">-d</span> <span class="s1">':'</span> <span class="nt">-f1</span><span class="si">)</span>
<span class="nv">PAGE_COUNT</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="k">${</span><span class="nv">PAGE_RANGE</span><span class="k">}</span><span class="s2">"</span> | <span class="nb">wc</span> <span class="nt">-l</span><span class="si">)</span>

<span class="k">for</span> <span class="o">((</span><span class="nv">idx</span><span class="o">=</span>1<span class="p">;</span> idx&lt;<span class="o">=</span>PAGE_COUNT<span class="p">;</span> <span class="nv">idx</span><span class="o">=</span>idx+2<span class="o">))</span>
<span class="k">do
	</span><span class="nv">HERE</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="k">${</span><span class="nv">PAGE_RANGE</span><span class="k">}</span><span class="s2">"</span> | <span class="nb">head</span> <span class="nt">-n</span> <span class="k">${</span><span class="nv">idx</span><span class="k">}</span> | <span class="nb">tail</span> <span class="nt">-1</span><span class="si">)</span>
	<span class="nv">NEXT</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="k">${</span><span class="nv">PAGE_RANGE</span><span class="k">}</span><span class="s2">"</span> | <span class="nb">head</span> <span class="nt">-n</span> <span class="k">$((</span>idx+1<span class="k">))</span> | <span class="nb">tail</span> <span class="nt">-1</span><span class="si">)</span>
	
	<span class="nv">APPLICATION_NAME</span><span class="o">=</span><span class="si">$(</span><span class="nb">sed</span> <span class="nt">-n</span> <span class="k">${</span><span class="nv">HERE</span><span class="k">}</span>,<span class="k">${</span><span class="nv">NEXT</span><span class="k">}</span>p config.xml | <span class="nb">sed</span> <span class="nt">-n</span> <span class="nt">-e</span> 2p | <span class="nb">sed</span> <span class="s1">'s/ //g'</span><span class="si">)</span>
	<span class="nv">APPLICATION_TARGET</span><span class="o">=</span><span class="si">$(</span><span class="nb">sed</span> <span class="nt">-n</span> <span class="k">${</span><span class="nv">HERE</span><span class="k">}</span>,<span class="k">${</span><span class="nv">NEXT</span><span class="k">}</span>p config.xml | <span class="nb">grep</span> <span class="s2">"target"</span> | <span class="nb">sed</span> <span class="s1">'s/ //g'</span><span class="si">)</span>
	<span class="nv">APPLICATION_PATH</span><span class="o">=</span><span class="si">$(</span><span class="nb">sed</span> <span class="nt">-n</span> <span class="k">${</span><span class="nv">HERE</span><span class="k">}</span>,<span class="k">${</span><span class="nv">NEXT</span><span class="k">}</span>p config.xml | <span class="nb">grep</span> <span class="s2">"source-path"</span> | <span class="nb">sed</span> <span class="s1">'s/ //g'</span><span class="si">)</span>
	
	<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="k">${</span><span class="nv">APPLICATION_TARGET</span><span class="k">}</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"&lt;target&gt;&lt;/target&gt;"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
		continue</span><span class="p">;</span>
	<span class="k">fi
	
	</span><span class="nb">echo</span> <span class="s2">"
	########## start ##########"</span>
	<span class="nb">echo</span> <span class="s2">"ì–´í”Œë¦¬ì¼€ì´ì…˜ëª… : </span><span class="k">${</span><span class="nv">APPLICATION_NAME</span><span class="k">}</span><span class="s2">"</span>
	<span class="nb">echo</span> <span class="s2">"íƒ€ê²Ÿì •ë³´ : </span><span class="k">${</span><span class="nv">APPLICATION_TARGET</span><span class="k">}</span><span class="s2">"</span>
	<span class="nb">echo</span> <span class="s2">"ì†ŒìŠ¤ìœ„ì¹˜ : </span><span class="k">${</span><span class="nv">APPLICATION_PATH</span><span class="k">}</span><span class="s2">"</span>
	<span class="nb">echo</span> <span class="s2">"########## end ##########
	"</span>
<span class="k">done</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="/../assets/posts/images/01-WebLogic/GetConfigBash/GetConfigBash_2.png" alt="GetConfigBash_2" /></p>

<h2 id="4-datasource-ì •ë³´">4. Datasource ì •ë³´</h2>

<h3 id="41-datasource-ì´ë¦„">4.1 Datasource ì´ë¦„</h3>

<h4 id="1-jdbc-system-resource-tag-ë²”ìœ„-ê²€ìƒ‰">(1). jdbc-system-resource tag ë²”ìœ„ ê²€ìƒ‰</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="nv">$ </span>egrep <span class="s2">"&lt;jdbc-system-resource&gt;|&lt;</span><span class="se">\/</span><span class="s2">jdbc-system-resource&gt;"</span> config.xml <span class="nt">-n</span>
270:  &lt;jdbc-system-resource&gt;
274:  &lt;/jdbc-system-resource&gt;
275:  &lt;jdbc-system-resource&gt;
279:  &lt;/jdbc-system-resource&gt;
</pre></td></tr></tbody></table></code></pre></div></div>

<h4 id="2-sed-ëª…ë ¹ìœ¼ë¡œ-ë²”ìœ„-ì¶œë ¥-2">(2). sed ëª…ë ¹ìœ¼ë¡œ ë²”ìœ„ ì¶œë ¥</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sed</span> <span class="nt">-n</span> 270,274p config.xml
  &lt;jdbc-system-resource&gt;
    &lt;name&gt;myDataSource_1&lt;/name&gt;
    &lt;target&gt;M1,myManaged_1&lt;/target&gt;
    &lt;descriptor-file-name&gt;jdbc/myDataSource_1-2365-jdbc.xml&lt;/descriptor-file-name&gt;
  &lt;/jdbc-system-resource&gt;
</pre></td></tr></tbody></table></code></pre></div></div>

<h4 id="3-ë°ì´í„°ì†ŒìŠ¤ëª…ì€-ë²”ìœ„ì˜-í•­ìƒ-ë‘ë²ˆì§¸ì—-ì´ë¦„ì„-ê°–ëŠ”ë‹¤">(3). ë°ì´í„°ì†ŒìŠ¤ëª…ì€ ë²”ìœ„ì˜ í•­ìƒ ë‘ë²ˆì§¸ì— ì´ë¦„ì„ ê°–ëŠ”ë‹¤.</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sed</span> <span class="nt">-n</span> 270,274p config.xml | <span class="nb">sed</span> <span class="nt">-n</span> <span class="nt">-e</span> 2p
    &lt;name&gt;myDataSource_1&lt;/name&gt;
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="42-datasource-ë°°í¬-target">4.2 Datasource ë°°í¬ Target</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sed</span> <span class="nt">-n</span> 270,274p config.xml | <span class="nb">grep</span> <span class="s2">"target"</span>
    &lt;target&gt;M1,myManaged_1&lt;/target&gt;
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="43-ë°ì´í„°ì†ŒìŠ¤-jdbc-xml-íŒŒì¼ëª…-ì¶œë ¥">4.3 ë°ì´í„°ì†ŒìŠ¤ JDBC xml íŒŒì¼ëª… ì¶œë ¥</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sed</span> <span class="nt">-n</span> 270,274p config.xml | <span class="nb">grep</span> <span class="s2">"descriptor-file-name"</span>
    &lt;descriptor-file-name&gt;jdbc/myDataSource_1-2365-jdbc.xml&lt;/descriptor-file-name&gt;
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="44-í†µí•©-datasource-ì •ë³´-ì¶œë ¥í•˜ê¸°">4.4 (í†µí•©) Datasource ì •ë³´ ì¶œë ¥í•˜ê¸°</h3>

<ul>
  <li>XML íŒŒì¼ ì•ˆì˜ USERNAME, URL STRING, JNDI ì •ë³´ ì¶œë ¥</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
</pre></td><td class="rouge-code"><pre><span class="nv">PAGE_RANGE</span><span class="o">=</span><span class="si">$(</span>egrep <span class="s2">"&lt;jdbc-system-resource&gt;|&lt;</span><span class="se">\/</span><span class="s2">jdbc-system-resource&gt;"</span> config.xml <span class="nt">-n</span> | <span class="nb">cut</span> <span class="nt">-d</span> <span class="s1">':'</span> <span class="nt">-f1</span><span class="si">)</span>
<span class="nv">PAGE_COUNT</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="k">${</span><span class="nv">PAGE_RANGE</span><span class="k">}</span><span class="s2">"</span> | <span class="nb">wc</span> <span class="nt">-l</span><span class="si">)</span>

<span class="k">for</span> <span class="o">((</span><span class="nv">idx</span><span class="o">=</span>1<span class="p">;</span> idx&lt;<span class="o">=</span>PAGE_COUNT<span class="p">;</span> <span class="nv">idx</span><span class="o">=</span>idx+2<span class="o">))</span>
<span class="k">do
	</span><span class="nv">HERE</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="k">${</span><span class="nv">PAGE_RANGE</span><span class="k">}</span><span class="s2">"</span> | <span class="nb">head</span> <span class="nt">-n</span> <span class="k">${</span><span class="nv">idx</span><span class="k">}</span> | <span class="nb">tail</span> <span class="nt">-1</span><span class="si">)</span>
	<span class="nv">NEXT</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="k">${</span><span class="nv">PAGE_RANGE</span><span class="k">}</span><span class="s2">"</span> | <span class="nb">head</span> <span class="nt">-n</span> <span class="k">$((</span>idx+1<span class="k">))</span> | <span class="nb">tail</span> <span class="nt">-1</span><span class="si">)</span>
	
	<span class="nv">DATASOURCE_NAME</span><span class="o">=</span><span class="si">$(</span><span class="nb">sed</span> <span class="nt">-n</span> <span class="k">${</span><span class="nv">HERE</span><span class="k">}</span>,<span class="k">${</span><span class="nv">NEXT</span><span class="k">}</span>p config.xml | <span class="nb">sed</span> <span class="nt">-n</span> <span class="nt">-e</span> 2p | <span class="nb">sed</span> <span class="s1">'s/ //g'</span><span class="si">)</span>
	<span class="nv">DATASOURCE_TARGET</span><span class="o">=</span><span class="si">$(</span><span class="nb">sed</span> <span class="nt">-n</span> <span class="k">${</span><span class="nv">HERE</span><span class="k">}</span>,<span class="k">${</span><span class="nv">NEXT</span><span class="k">}</span>p config.xml | <span class="nb">grep</span> <span class="s2">"target"</span> | <span class="nb">sed</span> <span class="s1">'s/ //g'</span><span class="si">)</span>
	<span class="nv">DATASOURCE_XML</span><span class="o">=</span><span class="si">$(</span><span class="nb">sed</span> <span class="nt">-n</span> <span class="k">${</span><span class="nv">HERE</span><span class="k">}</span>,<span class="k">${</span><span class="nv">NEXT</span><span class="k">}</span>p config.xml | <span class="nb">grep</span> <span class="s2">"descriptor-file-name"</span> | <span class="nb">sed</span> <span class="s1">'s/ //g'</span><span class="si">)</span>
	
	<span class="c"># XML íŒŒì¼ëª…ë§Œ ì¶œë ¥</span>
	<span class="nv">DATASOURCE_XML_REAL</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="k">${</span><span class="nv">DATASOURCE_XML</span><span class="k">}</span> | <span class="nb">cut</span> <span class="nt">-d</span> <span class="s1">'&gt;'</span> <span class="nt">-f2</span> | <span class="nb">cut</span> <span class="nt">-d</span> <span class="s1">'&lt;'</span> <span class="nt">-f1</span><span class="si">)</span>
	
	<span class="c"># USER ëª…ì€ &lt;name&gt;user&lt;/name&gt; TAG ì•„ë˜ì— ìˆë‹¤.</span>
	<span class="nv">DATASOURCE_XML_USERNAME_LINE</span><span class="o">=</span><span class="si">$(</span><span class="nb">cat</span> <span class="k">${</span><span class="nv">DATASOURCE_XML_REAL</span><span class="k">}</span> | <span class="nb">grep</span> <span class="s2">"&lt;name&gt;user&lt;</span><span class="se">\/</span><span class="s2">name&gt;"</span> <span class="nt">-n</span> | <span class="nb">cut</span> <span class="nt">-d</span> <span class="s1">':'</span> <span class="nt">-f1</span><span class="si">)</span>
	<span class="nv">DATASOURCE_XML_USERNAME</span><span class="o">=</span><span class="si">$(</span><span class="nb">cat</span> <span class="k">${</span><span class="nv">DATASOURCE_XML_REAL</span><span class="k">}</span> | <span class="nb">sed</span> <span class="nt">-n</span> <span class="nt">-e</span> <span class="k">$((</span>DATASOURCE_XML_USERNAME_LINE+1<span class="k">))</span>p | <span class="nb">sed</span> <span class="s1">'s/ //g'</span><span class="si">)</span>
	
	<span class="c"># URL STRING</span>
	<span class="nv">DATASOURCE_XML_URL</span><span class="o">=</span><span class="si">$(</span><span class="nb">cat</span> <span class="k">${</span><span class="nv">DATASOURCE_XML_REAL</span><span class="k">}</span> | <span class="nb">grep</span> <span class="s2">"&lt;url&gt;"</span> | <span class="nb">sed</span> <span class="s1">'s/ //g'</span><span class="si">)</span>
	
	<span class="c"># JNDI</span>
	<span class="nv">DATASOURCE_XML_JNDI</span><span class="o">=</span><span class="si">$(</span><span class="nb">cat</span> <span class="k">${</span><span class="nv">DATASOURCE_XML_REAL</span><span class="k">}</span> | <span class="nb">grep</span> <span class="s2">"&lt;jndi-name&gt;"</span> | <span class="nb">sed</span> <span class="s1">'s/ //g'</span><span class="si">)</span>
	
	<span class="nb">echo</span> <span class="s2">"
	########## start ##########"</span>
	<span class="nb">echo</span> <span class="s2">"ë°ì´í„°ì†ŒìŠ¤ëª… : </span><span class="k">${</span><span class="nv">DATASOURCE_NAME</span><span class="k">}</span><span class="s2">"</span>
	<span class="nb">echo</span> <span class="s2">"íƒ€ê²Ÿì •ë³´ : </span><span class="k">${</span><span class="nv">DATASOURCE_TARGET</span><span class="k">}</span><span class="s2">"</span>
	<span class="nb">echo</span> <span class="s2">"XML : </span><span class="k">${</span><span class="nv">DATASOURCE_XML</span><span class="k">}</span><span class="s2">"</span>
	
	<span class="nb">echo</span> <span class="s2">"
	-------"</span>
	<span class="nb">echo</span> <span class="s2">"USER : </span><span class="k">${</span><span class="nv">DATASOURCE_XML_USERNAME</span><span class="k">}</span><span class="s2">"</span>
	<span class="nb">echo</span> <span class="s2">"URL : </span><span class="k">${</span><span class="nv">DATASOURCE_XML_URL</span><span class="k">}</span><span class="s2">"</span>
	<span class="nb">echo</span> <span class="s2">"JNDI : </span><span class="k">${</span><span class="nv">DATASOURCE_XML_JNDI</span><span class="k">}</span><span class="s2">"</span>
	<span class="nb">echo</span> <span class="s2">"-------"</span>
	
	<span class="nb">echo</span> <span class="s2">"########## end ##########
	"</span>
<span class="k">done</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="/../assets/posts/images/01-WebLogic/GetConfigBash/GetConfigBash_3.png" alt="GetConfigBash_3" /></p>
:ET