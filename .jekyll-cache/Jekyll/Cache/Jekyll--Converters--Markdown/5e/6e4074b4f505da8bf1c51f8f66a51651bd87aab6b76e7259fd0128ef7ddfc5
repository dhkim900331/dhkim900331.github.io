I"Á<h2 id="1-overview">1. Overview</h2>
<p>Oracle HTTP Server 12cR2 ê¸°ì¤€ìœ¼ë¡œ OHS Componentê°€ ê¸°ë™ì´ ë˜ì§€ ì•Šìœ¼ë©°,</p>

<p><code class="language-plaintext highlighter-rouge">Nzos Call NzosSetCredential Returned 28791</code> Errorë¥¼ ê¸°ë¡í•œë‹¤.</p>

<p style="height:40px;"></p>

<h2 id="2-descriptions">2. Descriptions</h2>
<p>OHS Component Runtime Directory í•˜ìœ„ <code class="language-plaintext highlighter-rouge">keystores/default</code> ì—ëŠ” Wallet ì´ êµ¬ì„±ë˜ì–´ ìˆë‹¤.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">ls</span> <span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>/config/fmwconfig/components/OHS/instances/&lt;WORKER&gt;/keystores/default
cwallet.sso  cwallet.sso.lck
</pre></td></tr></tbody></table></code></pre></div></div>
<p style="height:20px;"></p>
<p>í•´ë‹¹ Wallet ì€ OHS ê¸°ë³¸ êµ¬ì„±ìœ¼ë¡œ ì œê³µë˜ëŠ” Demo Certificate ì´ë©°,</p>

<p>ì‚¬ìš©ìì˜ HTTPS Service ì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆê² ì§€ë§Œ, (<code class="language-plaintext highlighter-rouge">ssl.conf</code>)</p>

<p>NodeManagerì™€ Componentì˜ communication ìœ¼ë¡œë„ ì‚¬ìš© ëœë‹¤. (<code class="language-plaintext highlighter-rouge">admin.conf</code>)</p>

<blockquote>
  <p>ì°¸ê³  <a href="https://docs.oracle.com/en/middleware/fusion-middleware/web-tier/12.2.1.4/administer-ohs/getstart.html#GUID-24E159D9-E7E3-43B5-A4B6-0B29D2B00020">Configuring SSL for Admin Port</a></p>
</blockquote>
<p style="height:20px;"></p>
<p>ë‹¤ìŒ ëª…ë ¹ìœ¼ë¡œ Wallet Certificateì˜ Expired dateë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
</pre></td><td class="rouge-code"><pre><span class="nb">export </span><span class="nv">ORACLE_HOME</span><span class="o">=</span>&lt;ORACLE HOME&gt;
<span class="nb">export </span><span class="nv">DOMAIN_HOME</span><span class="o">=</span>&lt;DOMAIN HOME&gt;

<span class="nv">$ </span><span class="nb">cd</span> <span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>/config/fmwconfig/components/OHS/instances/&lt;WORKER&gt;/keystores/default
<span class="nv">$ </span><span class="k">${</span><span class="nv">ORACLE_HOME</span><span class="k">}</span>/oracle_common/bin/orapki wallet display <span class="nt">-wallet</span> <span class="nb">.</span>

<span class="o">(</span>Walletì— í¬í•¨ëœ Certificate ì¶œë ¥ log<span class="o">)</span>
Oracle PKI Tool : Version 12.2.1.4.0
Copyright <span class="o">(</span>c<span class="o">)</span> 2004, 2019, Oracle and/or its affiliates. All rights reserved.

Requested Certificates:
User Certificates:
Subject:        <span class="nv">CN</span><span class="o">=</span>localhost,OU<span class="o">=</span>FOR TESTING ONLY,O<span class="o">=</span>FOR TESTING ONLY
Trusted Certificates:
Subject:        <span class="nv">CN</span><span class="o">=</span>localhost,OU<span class="o">=</span>FOR TESTING ONLY,O<span class="o">=</span>FOR TESTING ONLY


<span class="nv">$ </span><span class="k">${</span><span class="nv">ORACLE_HOME</span><span class="k">}</span>/oracle_common/bin/orapki wallet <span class="nb">export</span> <span class="nt">-wallet</span> <span class="nb">.</span> <span class="nt">-dn</span> <span class="s1">'CN=localhost,OU=FOR TESTING ONLY,O=FOR TESTING ONLY'</span> <span class="nt">-cert</span> server.cer

<span class="o">(</span>Walletì—ì„œ Certificate ì¶”ì¶œ<span class="o">)</span>
Oracle PKI Tool : Version 12.2.1.4.0
Copyright <span class="o">(</span>c<span class="o">)</span> 2004, 2019, Oracle and/or its affiliates. All rights reserved.

Operation is successfully completed.


<span class="nv">$ </span>openssl x509 <span class="nt">-in</span> server.cer <span class="nt">-noout</span> <span class="nt">-text</span>
Certificate:
    Data:
        Version: 1 <span class="o">(</span>0x0<span class="o">)</span>
        Serial Number: 0 <span class="o">(</span>0x0<span class="o">)</span>
        Signature Algorithm: sha256WithRSAEncryption
        Issuer: O <span class="o">=</span> FOR TESTING ONLY, OU <span class="o">=</span> FOR TESTING ONLY, CN <span class="o">=</span> localhost
        Validity
            Not Before: Feb 27 08:18:17 2024 GMT
            Not After : Feb 25 08:18:17 2029 GMT
...

</pre></td></tr></tbody></table></code></pre></div></div>
<p style="height:20px;"></p>
<p>ì¶”ì¶œí•œ CertificateëŠ” 29ë…„ì— Expired ëœë‹¤.</p>

<p>Domain ìƒì„± ê¸°ì¤€ 5ë…„ ë’¤ Expired ëœë‹¤.</p>
<p style="height:20px;"></p>
<p>Wallet SSL Certificate ê°€ Expired ë˜ë©´ Componentì™€ NodeManagerê°€ HTTPS í†µì‹  ì‹œ ì‹¤íŒ¨í•˜ì—¬ OHS Startup ì‹¤íŒ¨í•˜ë©´ì„œ <code class="language-plaintext highlighter-rouge">Nzos Call NzosSetCredential Returned 28791</code> Error ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.</p>
<p style="height:20px;"></p>
<p>ì´ Expired dateë¥¼ ë‹¤ì‹œ ëŠ˜ë ¤ì£¼ê¸° ìœ„í•´ Walletì„ ì¬ìƒì„± í•´ì•¼ í•œë‹¤.</p>

<blockquote>
  <p>ì°¸ê³  12c: How to Recreate the Default Wallet that has Expired from Oracle HTTP Server (Doc ID 2729766.1)</p>
</blockquote>

<p style="height:40px;"></p>

<h2 id="3-references">3. References</h2>

<p><strong>How Does Oracle HTTP Server 12c Staging and Runtime Configuration Files Affect OHS Configuration Changes (Doc ID 2335871.1)</strong></p>

<p><strong>12c: How to Recreate the Default Wallet that has Expired from Oracle HTTP Server (Doc ID 2729766.1)</strong></p>

<p><strong>Oracle HTTP Server Start Failed with â€œNzos Call NzosSetCredential Returned 28791â€ Due to Expired SSL Certificate (Doc ID 2314626.1)</strong></p>

<p><strong>â€œnzos call nzosSetCredential returned 28791â€ ì—ëŸ¬ì™€ í•¨ê»˜ Componentê°€ ê¸°ë™ë˜ì§€ ì•ŠìŒ (Doc ID 3020447.1)</strong></p>
:ET