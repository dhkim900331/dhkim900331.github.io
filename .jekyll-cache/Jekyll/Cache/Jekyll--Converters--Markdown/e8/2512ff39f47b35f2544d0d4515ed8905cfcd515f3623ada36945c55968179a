I"­ <h2 id="1-ê°œìš”">1. ê°œìš”</h2>

<p>podman ì„ ì´ìš©í•œ Container ìƒì„±ê³¼ ë¹„-ë£¨íŠ¸ ê³„ì •ìœ¼ë¡œ ì„œë¹„ìŠ¤ë¥¼ ë“±ë¡í•´ë³¸ë‹¤.</p>

<h2 id="2-ì»¨í…Œì´ë„ˆ-ìƒì„±">2. ì»¨í…Œì´ë„ˆ ìƒì„±</h2>

<h3 id="21-ì´ë¯¸ì§€-ê²€ìƒ‰">2.1 ì´ë¯¸ì§€ ê²€ìƒ‰</h3>

<pre><code class="language-0"># podman search docker.io/httpd
INDEX       NAME                                              DESCRIPTION                                       STARS   OFFICIAL   AUTOMATED
docker.io   docker.io/library/httpd                           The Apache HTTP Server Project                    3802    [OK]
docker.io   docker.io/centos/httpd-24-centos7                 Platform for running Apache httpd 2.4 or bui...   40
docker.io   docker.io/manageiq/httpd                          Container with httpd, built on CentOS for Ma...   1                  [OK]
docker.io   docker.io/clearlinux/httpd                        httpd HyperText Transfer Protocol (HTTP) ser...   1
... skip ...
</code></pre>

<blockquote>
  <p>ì‚¬ìš©í• (ë„ìš¸) ì´ë¯¸ì§€ë¥¼ ê²€ìƒ‰í•œë‹¤.</p>

  <p>ì—¬ê¸°ì„œëŠ” httpd ì—ì„œ ê°€ì¥ ë‚®ì€ ë²„ì „(ì•„ë¬´ê±°ë‚˜) ì„ í™œìš©í•œë‹¤.</p>
</blockquote>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="c"># skopeo inspect docker://docker.io/library/httpd</span>
<span class="o">{</span>
    <span class="s2">"Name"</span>: <span class="s2">"docker.io/library/httpd"</span>,
    <span class="s2">"Digest"</span>: <span class="s2">"sha256:0c8dd1d9f90f0da8a29a25dcc092aed76b09a1c9e5e6e93c8db3903c8ce6ef29"</span>,
    <span class="s2">"RepoTags"</span>: <span class="o">[</span>
        <span class="s2">"2"</span>,
        <span class="s2">"2-alpine"</span>,
        <span class="s2">"2-alpine3.13"</span>,
        <span class="s2">"2-alpine3.14"</span>,
        <span class="s2">"2-alpine3.15"</span>,
        <span class="s2">"2-bullseye"</span>,
        <span class="s2">"2-buster"</span>,
... skip ...
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p>inspect ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ ì°¾ì€ ì´ë¯¸ì§€ì—ì„œ í¬í•¨ëœ ë¦´ë¦¬ì¦ˆë“¤ì„ ëª¨ë‘ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>

  <p>ìš°ë¦¬ëŠ” 2-alpine3.15 ë¥¼ ì•„ë˜ì—ì„œ ì‚¬ìš©í•˜ê¸°ë¡œ í•˜ì.</p>
</blockquote>

<h3 id="22-ì´ë¯¸ì§€-ë‹¤ìš´ë¡œë“œ">2.2 ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="c"># podman pull docker.io/library/httpd:"2-alpine3.14"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="23-ì»¨í…Œì´ë„ˆ-ì‹¤í–‰">2.3 ì»¨í…Œì´ë„ˆ ì‹¤í–‰</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="c"># mkdir /html</span>
<span class="c"># echo "Hello World" &gt; /html/index.html</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p>ì˜µì…˜ìœ¼ë¡œ, í˜¸ìŠ¤íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì»¨í…Œì´ë„ˆì—ê²Œ ì „ë‹¬í•˜ê¸° ìœ„í•œ í™˜ê²½</p>
</blockquote>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="c"># podman run --detach --name "myweb" -p "8080:80" -v "/html:/usr/local/apache2/htdocs:Z" -e "BLOGGER=DHKIM" -e "GIT=dhkim900331" docker.io/library/httpd</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p><em>_â€“detach : ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰</em></p>

  <p><em>â€“name : ì»¨í…Œì´ë„ˆ ëª…</em></p>

  <p><em>-p : í˜¸ìŠ¤íŠ¸ 8080 portë¥¼ ì»¨í…Œì´ë„ˆ 80 portë¡œ forwarding</em></p>

  <p><em>-v : í˜¸ìŠ¤íŠ¸ /html ë””ë ‰í† ë¦¬ë¥¼ ì»¨í…Œì´ë„ˆì˜ /usr/â€¦/htdocs ë””ë ‰í† ë¦¬ë¡œ ì—°ê²°</em></p>

  <p>_  ã„´ Z ì˜µì…˜ì€ SELinux ì˜µì…˜. ì£¼ì§€ ì•Šìœ¼ë©´ SELinux policy ë‹¤ë¥¼ ê²½ìš° ê¶Œí•œ ë¬¸ì œ ë°œìƒ_</p>

  <p>_-e : í™˜ê²½ ë³€ìˆ˜ë¥¼ key:value pairë¡œ ì „ë‹¬__</p>

  <p>ë§ˆì§€ë§‰ argumentëŠ” ì•„ê¹Œ ë°›ì€ ì´ë¯¸ì§€</p>
</blockquote>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="c"># podman ps -a</span>
CONTAINER ID  IMAGE                           COMMAND           CREATED        STATUS            PORTS                 NAMES
3c6ad1ea13e3  docker.io/library/httpd:latest  httpd-foreground  3 minutes ago  Up 3 minutes ago  0.0.0.0:8080-&gt;80/tcp  myweb
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p>ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ì¤‘ì¸ ìƒíƒœ(STATUSë¥¼ ë³´ê³  íŒë‹¨)</p>
</blockquote>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="c"># podman exec -it myweb /bin/bash</span>
root@3c6ad1ea13e3:/usr/local/apache2# <span class="nb">hostname
</span>3c6ad1ea13e3
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p>ì»¨í…Œì´ë„ˆ ë‚´ë¶€ë¡œ ì ‘ì†í•˜ì—¬ hostname ëª…ë ¹ì„ ì³ë³´ì•˜ë‹¤.</p>
</blockquote>

<h2 id="3-ë¹„-ë£¨íŠ¸-ê³„ì •-ì„œë¹„ìŠ¤-ë“±ë¡">3. ë¹„-ë£¨íŠ¸ ê³„ì • ì„œë¹„ìŠ¤ ë“±ë¡</h2>

<ul>
  <li>
    <p>ì—¬ê¸°ì„œë¶€í„°ëŠ” ë¹„-ë£¨íŠ¸ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í•˜ë©´ì„œ ì§„í–‰í•œë‹¤.</p>

    <ul>
      <li>ì•ì„œ ì»¨í…Œì´ë„ˆ ìƒì„± ì‹œ ì•„ë˜ì—ì„œ ì‚¬ìš©í•  ê³„ì •ê³¼ ë‹¤ë¥´ë©´ ì»¨í…Œì´ë„ˆë¥¼ ì§€ìš°ê³  ì—¬ê¸° ê³„ì •ìœ¼ë¡œ ë‹¤ì‹œ ìƒì„±í•œë‹¤.</li>
    </ul>
  </li>
  <li>
    <p>systemctl â€“user ì˜µì…˜ì„ ì‚¬ìš©í•œë‹¤.</p>

    <ul>
      <li>
        <p>ë°˜ë“œì‹œ ssh <user>@<host> ë°©ì‹ìœ¼ë¡œ ë¡œê·¸ì¸ í•´ì•¼í•œë‹¤.</host></user></p>
      </li>
      <li>
        <p>ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ë‹¤ìŒ ì²˜ëŸ¼ busì— ì—°ê²°í•˜ì§€ ëª»í•œë‹¤.</p>

        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="c"># systemctl --user</span>
Failed to connect to bus: ê·¸ëŸ° íŒŒì¼ì´ë‚˜ ë””ë ‰í„°ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤
</pre></td></tr></tbody></table></code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="c"># ssh test@localhost</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p>ì»¨í…Œì´ë„ˆë¥¼ ì¼ë°˜ê³„ì • test ì— ì„œë¹„ìŠ¤ ë“±ë¡í•˜ê¸° ìœ„í•˜ì—¬ ssh ë¡œê·¸ì¸</p>
</blockquote>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="c"># mkdir -p ~/.config/systemd/user</span>
<span class="c"># podman generate systemd myweb --new &gt; ~/.config/systemd/user/container-myweb.service</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p>í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ myweb ì»¨í…Œì´ë„ˆë¥¼ service íŒŒì¼ë¡œ ìƒì„±</p>
</blockquote>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="c"># podman stop myweb</span>
<span class="c"># podman rm myweb</span>
<span class="c"># systemctl --user enable --now container-myweb.service</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p>myweb ì»¨í…Œì´ë„ˆë¥¼ ì •ì§€/ì‚­ì œ í•˜ê³ ,</p>

  <p>user ì„œë¹„ìŠ¤ë¥¼ ì¬ë¶€íŒ… ì‹œ ìë™ ì‹œì‘ë˜ë„ë¡ ë° ì§€ê¸ˆ ë‹¹ì¥ ì‹œì‘í•˜ë„ë¡ ì„¤ì •í•œë‹¤.</p>
</blockquote>
:ET