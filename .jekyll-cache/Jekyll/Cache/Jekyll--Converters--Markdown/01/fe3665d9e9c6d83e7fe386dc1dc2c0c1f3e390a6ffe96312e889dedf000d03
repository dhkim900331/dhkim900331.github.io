I"Ë5<h2 id="1-ê°œìš”">1. ê°œìš”</h2>

<p>RHCSA ê³¼ì •ì„ ì¤€ë¹„í•˜ë©´ì„œ, Storage íŒŒí‹°ì…”ë‹ì„ ì •ë¦¬í•œë‹¤.</p>

<p>fdisk, gdisk ë¥¼ ë¨¼ì € ê³µë¶€í–ˆì§€ë§Œ, parted ê°€ ë„ˆë¬´ í¸ë¦¬í•˜ì—¬ partedë¡œ ì •ë¦¬í•œë‹¤.</p>
<p style="height:20px;"></p>
<h2 id="2-mbr--gpt">2. MBR / GPT</h2>

<p>MBRê³¼ GPTì˜ ì°¨ì´ì  ë“±ì€ ë‹¤ë¥¸ êµ¬ê¸€ë§ìœ¼ë¡œ ì‰½ê²Œ ì°¾ì•„ë³¼ ìˆ˜ ìˆë‹¤.</p>

<p>ì•„ë˜ Section ì‹¤ìŠµì—ì„œëŠ” MBR ì´ë“  GPTì´ë“  mklabel ì—ì„œë§Œ ì§€ì •í•˜ë©´ ëœë‹¤.</p>

<blockquote>
  <p>ì˜ˆì‹œ</p>

  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>parted /dev/vdb mklabel msdos <span class="c"># MBR</span>
parted /dev/vdb mklabel gpt <span class="c"># GPT</span>
</pre></td></tr></tbody></table></code></pre></div>  </div>

  <p><em>ë„ˆë¬´ í¸ë¦¬í•˜ë‹¤..</em></p>
</blockquote>
<p style="height:20px;"></p>
<h2 id="3-gpt-íŒŒí‹°ì…”ë‹">3. GPT íŒŒí‹°ì…”ë‹</h2>

<blockquote>
  <p>MBR íŒŒí‹°ì…”ë‹ì€ msdos ë¡œ label ë§Œ ì£¼ë©´ ë˜ë¯€ë¡œ, GPT ë¡œ ì„¤ëª…í•œë‹¤.</p>
</blockquote>

<h3 id="31-ì‚¬ìš©-ê°€ëŠ¥í•œ-ë””ìŠ¤í¬-í™•ì¸">3.1 ì‚¬ìš© ê°€ëŠ¥í•œ ë””ìŠ¤í¬ í™•ì¸</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="c"># lsblk --fs</span>
NAME   FSTYPE LABEL UUID                                 MOUNTPOINT
vda                                                     
â”œâ”€vda1                                                  
â”œâ”€vda2 vfat         399C-0F7D                            /boot/efi
â””â”€vda3 xfs    root  3cd0d4ca-93f6-423b-a469-70ab2b10b667 /
vdb                                                     
vdc                                                     
vdd
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p>ìƒˆë¡œìš´ ë””ìŠ¤í¬(HDD or SDD ë“±)ë¥¼ ë¶™ì´ë©´ /dev/vd{a~â€¦z} ìœ¼ë¡œ ì¶”ê°€ ëœë‹¤.</p>
</blockquote>
<p style="height:20px;"></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="c"># parted /dev/vdb print</span>
Error: /dev/vdb: unrecognised disk label
Model: Virtio Block Device <span class="o">(</span>virtblk<span class="o">)</span>                                     
Disk /dev/vdb: 5369MB
Sector size <span class="o">(</span>logical/physical<span class="o">)</span>: 512B/512B
Partition Table: unknown
Disk Flags: 
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p>/dev/vdb ë¥¼ í™•ì¸í•´ë³´ë‹ˆ disk label ì´ ì—†ë‹¤ëŠ” errorì™€, Partion tableì´ unknown ì´ë¼ëŠ” ê²ƒì´ í™•ì¸ëœë‹¤.</p>
</blockquote>
<p style="height:20px;"></p>
<h3 id="32-ë””ìŠ¤í¬-ë¼ë²¨ë§">3.2 ë””ìŠ¤í¬ ë¼ë²¨ë§</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre># parted /dev/vdb mklabel gpt
Information: You may need to update /etc/fstab.
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p>/dev/vdb ë””ìŠ¤í¬ë¥¼ GPT ë¼ë²¨ë§</p>

  <p><em>MBRì¼ ê²½ìš° gpt -&gt; msdos</em></p>
</blockquote>
<p style="height:20px;"></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="c"># parted /dev/vdb print                                  </span>
Model: Virtio Block Device <span class="o">(</span>virtblk<span class="o">)</span>
Disk /dev/vdb: 5369MB
Sector size <span class="o">(</span>logical/physical<span class="o">)</span>: 512B/512B
Partition Table: gpt
Disk Flags:

Number  Start  End  Size  File system  Name  Flags

</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p>print ëª…ë ¹ìœ¼ë¡œ GPT ë¼ë²¨ë§ ì—¬ë¶€ë„ í™•ì¸ëœë‹¤.</p>
</blockquote>
<p style="height:20px;"></p>
<h3 id="33-íŒŒí‹°ì…˜-ìƒì„±">3.3 íŒŒí‹°ì…˜ ìƒì„±</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="c"># parted /dev/vdb mkpart backup xfs 1s 2GB</span>
Warning: You requested a partition from 512B to 2000MB <span class="o">(</span>sectors 1..3906250<span class="o">)</span><span class="nb">.</span>
The closest location we can manage is 17.4kB to 2000MB <span class="o">(</span>sectors 34..3906250<span class="o">)</span><span class="nb">.</span>
Is this still acceptable to you?
Yes/No? Yes                                                              
Warning: The resulting partition is not properly aligned <span class="k">for </span>best performance:
34s % 2048s <span class="o">!=</span> 0s
Ignore/Cancel? Ignore                                                    
Information: You may need to update /etc/fstab.
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p>/dev/vdb ì— ìµœì´ˆ íŒŒí‹°ì…˜ì„ ìƒì„±í•˜ì—¿ë‹¤.</p>

  <p><em>íŒŒí‹°ì…˜ ëª…: backup</em></p>

  <p><strong>íŒŒí‹°ì…˜ íƒ€ì…: xfs</strong></p>

  <p><em>íŒŒí‹°ì…˜ í¬ê¸°: 2GB</em></p>

  <p>â€‹	<em>ã„´ìµœì´ˆ íŒŒí‹°ì…˜ì´ë¯€ë¡œ, ê°€ì¥ ìµœì†Œë‹¨ìœ„ 1Sector ë¶€í„° 2GB ê¹Œì§€ ì„¤ì •)</em></p>

  <p>â€‹	_ã„´â€3.2â€ ì—ì„œ Sector size ë¥¼ ì•Œ ìˆ˜ ìˆë‹¤.__</p>

  <p><em>_MBRì¼ ê²½ìš° backup -&gt; primary(ê²½ìš°ì— ë”°ë¼ extended)</em></p>
</blockquote>
<p style="height:20px;"></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="c"># parted /dev/vdb print                                  </span>
Model: Virtio Block Device <span class="o">(</span>virtblk<span class="o">)</span>
Disk /dev/vdb: 5369MB
Sector size <span class="o">(</span>logical/physical<span class="o">)</span>: 512B/512B
Partition Table: gpt
Disk Flags:

Number  Start   End     Size    File system  Name    Flags
 1      17.4kB  2000MB  2000MB               backup 
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p>printì˜ ê²°ê³¼ë¥¼ ë³´ë©´, ì›í•˜ëŠ” ëŒ€ë¡œ ìƒì„±ë˜ì–´ ìˆë‹¤.</p>

  <p><em>1s = 512B ë¼ ì˜ˆìƒë˜ì§€ë§Œ, ì‹œìŠ¤í…œì€ ìµœì†Œ í¬ê¸°ê°€ 17.4kB ì¸ë“¯ í•˜ë‹¤</em></p>
</blockquote>
<p style="height:20px;"></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="rouge-code"><pre><span class="c"># mkfs.xfs /dev/vdb1</span>
meta-data<span class="o">=</span>/dev/vdb1              <span class="nv">isize</span><span class="o">=</span>512    <span class="nv">agcount</span><span class="o">=</span>4, <span class="nv">agsize</span><span class="o">=</span>122070 blks
         <span class="o">=</span>                       <span class="nv">sectsz</span><span class="o">=</span>512   <span class="nv">attr</span><span class="o">=</span>2, <span class="nv">projid32bit</span><span class="o">=</span>1
         <span class="o">=</span>                       <span class="nv">crc</span><span class="o">=</span>1        <span class="nv">finobt</span><span class="o">=</span>1, <span class="nv">sparse</span><span class="o">=</span>1, <span class="nv">rmapbt</span><span class="o">=</span>0
         <span class="o">=</span>                       <span class="nv">reflink</span><span class="o">=</span>1
data     <span class="o">=</span>                       <span class="nv">bsize</span><span class="o">=</span>4096   <span class="nv">blocks</span><span class="o">=</span>488277, <span class="nv">imaxpct</span><span class="o">=</span>25
         <span class="o">=</span>                       <span class="nv">sunit</span><span class="o">=</span>0      <span class="nv">swidth</span><span class="o">=</span>0 blks
naming   <span class="o">=</span>version 2              <span class="nv">bsize</span><span class="o">=</span>4096   ascii-ci<span class="o">=</span>0, <span class="nv">ftype</span><span class="o">=</span>1
log      <span class="o">=</span>internal log           <span class="nv">bsize</span><span class="o">=</span>4096   <span class="nv">blocks</span><span class="o">=</span>2560, <span class="nv">version</span><span class="o">=</span>2
         <span class="o">=</span>                       <span class="nv">sectsz</span><span class="o">=</span>512   <span class="nv">sunit</span><span class="o">=</span>0 blks, lazy-count<span class="o">=</span>1
realtime <span class="o">=</span>none                   <span class="nv">extsz</span><span class="o">=</span>4096   <span class="nv">blocks</span><span class="o">=</span>0, <span class="nv">rtextents</span><span class="o">=</span>0

<span class="c"># parted /dev/vdb print</span>
Model: Virtio Block Device <span class="o">(</span>virtblk<span class="o">)</span>
Disk /dev/vdb: 5369MB
Sector size <span class="o">(</span>logical/physical<span class="o">)</span>: 512B/512B
Partition Table: gpt
Disk Flags:

Number  Start   End     Size    File system  Name    Flags
 1      17.4kB  2000MB  2000MB  xfs          backup
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p>íŒŒí‹°ì…˜ì˜ íŒŒì¼ ì‹œìŠ¤í…œ ìœ í˜•ì„ xfsë¡œ ì„ ì–¸í•˜ê³  printë¡œ í™•ì¸í•œ ëª¨ìŠµ</p>
</blockquote>
<p style="height:20px;"></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="c"># udevadm settle</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p>/dev/vda1 ì¥ì¹˜ê°€ ì¤€ë¹„ë˜ëŠ” ê²ƒì„ ê¸°ë‹¤ë ¤ì£¼ëŠ” ëª…ë ¹ì–´
ì›ë˜ ìœ—ë¶€ë¶„(mkfs)ë³´ë‹¤ ì¼ì° ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ë°.. ìê¾¸ ì´ë ‡ê²Œ ì™¸ì›Œë²„ë ¸ë‹¤.</p>
</blockquote>
<p style="height:20px;"></p>
<h3 id="34-íŒŒì¼ì‹œìŠ¤í…œ-ë§ˆìš´íŠ¸">3.4 íŒŒì¼ì‹œìŠ¤í…œ ë§ˆìš´íŠ¸</h3>

<p>ì‹¤ì œ ë””ë ‰í† ë¦¬ë¡œ ë§ˆìš´íŠ¸ ì§€ì ì„ í• ë‹¹í•´ì•¼ ì“¸ ìˆ˜ ìˆë‹¤.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="c"># mkdir /backup</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p>ë§ˆìš´íŠ¸ ì§€ì  ë””ë ‰í† ë¦¬ë¥¼ ìƒì„±í•œë‹¤.</p>
</blockquote>
<p style="height:20px;"></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="c"># lsblk --fs</span>
NAME   FSTYPE LABEL UUID                                 MOUNTPOINT
vda                                                     
â”œâ”€vda1                                                  
â”œâ”€vda2 vfat         399C-0F7D                            /boot/efi
â””â”€vda3 xfs    root  3cd0d4ca-93f6-423b-a469-70ab2b10b667 /
vdb                                                     
â””â”€vdb1 xfs          3b1e73fa-409b-459c-aeaf-8866cef00f32
vdc                                                     
vdd       
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p>/dev/vdb1 íŒŒí‹°ì…˜ì˜ UUIDë¥¼ í™•ì¸í•œë‹¤.</p>
</blockquote>
<p style="height:20px;"></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nv">UUID</span><span class="o">=</span>3b1e73fa-409b-459c-aeaf-8866cef00f32 /backup xfs defaults 0 0
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p>/etc/fstab íŒŒì¼ì— ìœ„ ë‚´ìš©ì„ ì¶”ê°€í•œë‹¤.</p>
</blockquote>
<p style="height:20px;"></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="c"># systemctl daemon-reload </span>
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p>/etc/fstab íŒŒì¼ì„ ì‹œìŠ¤í…œì´ ë‹¤ì‹œ ì½ë„ë¡ í•œë‹¤.</p>
</blockquote>
<p style="height:20px;"></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="c"># mount /backup</span>
<span class="c"># mount | grep vdb1</span>
/dev/vdb1 on /backup <span class="nb">type </span>xfs <span class="o">(</span>rw,relatime,seclabel,attr2,inode64,noquota<span class="o">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p>ì‹¤ì œ mount ê°€ ë˜ë„ë¡ í•˜ê³ , ì˜ ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ëª¨ìŠµ
ì´ì œ <em>systemctl reboot</em> ìœ¼ë¡œ ì¬ë¶€íŒ…í•˜ì—¬ë„ mountê°€ í•­ìƒ ë˜ì–´ìˆë‹¤.</p>
</blockquote>
:ET