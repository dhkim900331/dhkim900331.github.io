<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-translate-customization" content="108d9124921d80c3-80e20d618ff053c8-g4f02ec6f3dba68b7-c">
  <meta name="google-site-verification" content="VA4--HCHFiwWLaC20E-0qHP0yy2WDEsRqLXx4zNzeiE">
  <!-- Google Adsense -->
  <meta name="google-adsense-account" content="ca-pub-6953284101209041">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6953284101209041" crossorigin="anonymous"></script><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>[Coherence/Web] How to install Coherence Web 14c | IT Blogger DongDong</title>
<meta name="generator" content="Jekyll v4.3.4">
<meta property="og:title" content="[Coherence/Web] How to install Coherence Web 14c">
<meta name="author" content="DongHyun Kim">
<meta property="og:locale" content="en_US">
<meta name="description" content="1. Overview">
<meta property="og:description" content="1. Overview">
<link rel="canonical" href="https://dhkim900331.github.io/coherence/How-to-install-Coherence-Web-14c">
<meta property="og:url" content="https://dhkim900331.github.io/coherence/How-to-install-Coherence-Web-14c">
<meta property="og:site_name" content="IT Blogger DongDong">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-04-18T23:56:19+00:00">
<meta name="twitter:card" content="summary">
<meta property="twitter:title" content="[Coherence/Web] How to install Coherence Web 14c">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"DongHyun Kim"},"dateModified":"2023-04-18T23:56:19+00:00","datePublished":"2023-04-18T23:56:19+00:00","description":"1. Overview","headline":"[Coherence/Web] How to install Coherence Web 14c","mainEntityOfPage":{"@type":"WebPage","@id":"https://dhkim900331.github.io/coherence/How-to-install-Coherence-Web-14c"},"url":"https://dhkim900331.github.io/coherence/How-to-install-Coherence-Web-14c"}</script>
<!-- End Jekyll SEO tag -->
<!-- original favicon tag -->
  <!--<link rel="shortcut icon" href="">-->
  
  <!-- tobe favicon tag (2022.02.22) -->
  <!-- https://hongpage.kr/28 -->
  <link rel="shortcut icon" href="/assets/img/favicons/favicon.ico">
  <link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">
  <link rel="manifest" href="/assets/img/favicons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-noto-sans@0.0.72/index.min.css">
  <link rel="stylesheet" href="/assets/css/main.css">
  <script src="/assets/js/main.js"></script><link type="application/atom+xml" rel="alternate" href="https://dhkim900331.github.io/feed.xml" title="IT Blogger DongDong">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
<!-- and it's easy to individually load additional languages -->
<script charset="UTF-8" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/languages/go.min.js"></script>



















<script>
// Init highlight js
document.addEventListener('DOMContentLoaded', function(event) {
  var els = document.querySelectorAll('pre code')

  function addLangData(block) {
    var outer = block.parentElement.parentElement.parentElement;
    var lang = block.getAttribute('data-lang');
    for (var i = 0; i < outer.classList.length; i++) {
      var cls = outer.classList[i];
      if (cls.startsWith('language-')) {
        lang = cls;
        break;
      }
    }
    if (!lang) {
      cls = block.getAttribute('class');
      lang = cls ? cls.replace('hljs ', '') : '';
    }
    if (lang.startsWith('language-')) {
      lang = lang.substr(9);
    }
    block.setAttribute('class', 'hljs ' + lang);
    block.parentNode.setAttribute('data-lang', lang);
  }

  function addBadge(block) {
    var enabled = ('true' || 'true').toLowerCase();
    if (enabled == 'true') {
      var pre = block.parentElement;
      pre.classList.add('badge');
	  
	  /* CUSTOM (2023-03-28) */  
	  var codeBody = pre.querySelector(".rouge-code pre").innerText;
	  pre.addEventListener('dblclick', () => {
		var lang = block.parentNode.getAttribute('data-lang', lang);
		window.navigator.clipboard.writeText(codeBody);
		block.parentNode.setAttribute('data-lang', "copied");
		setTimeout(() => {
		  block.parentNode.setAttribute('data-lang', lang);
		}, 2000);
	  });
    }
  }
  
  function getPosition( element ) {
	var rect = element.getBoundingClientRect();
	return {
		x: rect.left,
		y: rect.top
	};
  }

  function handle(block) {
    addLangData(block);
    addBadge(block)
    hljs.highlightBlock(block);
  }

  for (var i = 0; i < els.length; i++) {
    var el = els[i];
    handle(el);
  }
});
</script>

<style>
  /* code language badge */
  pre.badge::before {
    content: attr(data-lang);
    color: #fff;
    background-color: #ff4e00;
    padding: 0 .5em;
    border-radius: 0 2px;
    text-transform: uppercase;
    text-align: center;
    min-width: 32px;
    display: inline-block;
    position: absolute;
    right: 0;
  }

  /* fix wrong badge display for firefox browser */
  code > table pre::before {
    display: none;
  }
</style>
</head>
<body>



























































































































<header class="site-header " role="banner">

  <div class="wrapper">
    <div class="site-header-inner">
<span class="site-brand"><a class="site-brand-inner" rel="author" href="/">
  <img class="site-favicon" title="IT Blogger DongDong" src="" onerror="this.style.display='none'">
  IT Blogger DongDong
</a>
</span><nav class="site-nav">
          <input type="checkbox" id="nav-trigger" class="nav-trigger">
          <label for="nav-trigger">
            <span class="menu-icon">
              <svg viewbox="0 0 18 15" width="18px" height="15px">
                <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
              </svg>
            </span>
          </label>

          <div class="trigger">
<a class="page-link" href="/about">ABOUT</a><a class="page-link" href="/archives">ARCHIVES</a><a class="page-link" href="/categories">CATEGORIES</a><a class="page-link" href="/">HOME</a><a class="page-link" href="/search">SEARCH</a><a class="page-link" href="/tags">TAGS</a>









<span class="page-link">



<div id="google_translate_element" style="display: none;">
</div>

<span class="ct-language">
  <ul class="list-unstyled ct-language-dropdown">
    
      <li>
        <a href="#" class="lang-select" data-lang="en">
          
          <img src="https://cdn.countryflags.com/thumbs/united-states-of-america/flag-400.png" title="English">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="fr">
          
          <img src="https://cdn.countryflags.com/thumbs/france/flag-400.png" title="French">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="zh-CN">
          
          <img src="https://cdn.countryflags.com/thumbs/china/flag-400.png" title="Chinese(Simple)">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="ja">
          
          <img src="https://cdn.countryflags.com/thumbs/japan/flag-400.png" title="Japanese">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="ko">
          
          <img src="https://cdn.countryflags.com/thumbs/south-korea/flag-400.png" title="Korean">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="ru">
          
          <img src="https://cdn.countryflags.com/thumbs/russia/flag-400.png" title="Russian">
          
        </a>
      </li>
    
  </ul>
</span>

<script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement({
    pageLanguage: 'en',
    autoDisplay: false,
    layout: google.translate.TranslateElement.InlineLayout.VERTICAL
  }, 'google_translate_element');

  // Links to cross-origin destinations are unsafe
  var gll = document.getElementsByClassName('goog-logo-link')[0];
  if (gll) {
    gll.setAttribute('rel', 'noopener');
  }

  function restoreLang() {
    var iframe = document.getElementsByClassName('goog-te-banner-frame')[0];
    if (!iframe) return;

    var innerDoc = iframe.contentDocument || iframe.contentWindow.document;
    var restore_el = innerDoc.getElementsByTagName("button");

    for (var i = 0; i < restore_el.length; i++) {
      if (restore_el[i].id.indexOf("restore") >= 0) {
        restore_el[i].click();
        var close_el = innerDoc.getElementsByClassName("goog-close-link");
        close_el[0].click();
        return;
      }
    }
  }

  function triggerHtmlEvent(element, eventName) {
    var event;
    if (document.createEvent) {
      event = document.createEvent('HTMLEvents');
      event.initEvent(eventName, true, true);
      element.dispatchEvent(event);
    } else {
      event = document.createEventObject();
      event.eventType = eventName;
      element.fireEvent('on' + event.eventType, event);
    }
  }

  var googleCombo = document.querySelector("select.goog-te-combo");
  var langSelect = document.querySelector('.ct-language');
  langSelect.addEventListener('click', function(event) {
    if (!event.target) {
      return;
    }

    var selected = document.querySelector('.ct-language .ct-language-selected');
    if (selected) {
      selected.classList.remove('ct-language-selected');
    }

    var target = event.target;
    while (target && target !== langSelect ) {
      if (target.matches('.lang-select')) {
        break;
      }
      target = target.parentElement;
    }

    if (target && target.matches('.lang-select')) {
      var lang = target.getAttribute('data-lang');
      if (googleCombo.value == lang) {
        restoreLang();
      } else {
        target.parentElement.classList.add('ct-language-selected');
        googleCombo.value = lang;
        triggerHtmlEvent(googleCombo, 'change');
      }
    }

    event.preventDefault();
  });
}
</script>

<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</span>
</div>
        </nav>
</div>
  </div>
</header>

<script>
  function initHeader() {
    var lastScrollY = getScrollPos().y;
    var documentElement = document.documentElement;

    function storeScrollData() {
      var y = getScrollPos().y;var scrollStatus = "";

      if (y <= 0) {
        scrollStatus = "top";
      } else if ((window.innerHeight + y) >= document.body.offsetHeight) {
        scrollStatus = "bottom";
      } else {
        var isScrollDown = (y - lastScrollY > 0) ? true : false;
        scrollStatus = isScrollDown ? "down" : "up";
      }

      lastScrollY = y;
      documentElement.setAttribute("data-scroll-status", scrollStatus);
    }

    window.addEventListener('scroll', function(e) {
      storeScrollData();
    });

    storeScrollData();
  }
  document.addEventListener('DOMContentLoaded', initHeader);
</script>
















































































































































<script>
  function hashLocate(hashValue) {
    hashValue = hashValue.replace(/^.*#h-/, '');
    hashValue = decodeURIComponent(hashValue);
    var element = document.getElementById(hashValue);

    if (!element) {
      return;
    }

    var header = document.querySelector('header.site-header');
    var headerRect = header.getBoundingClientRect();
    var headerTop = Math.floor(headerRect.top);
    var headerHeight = Math.floor(headerRect.height);
    var scrollPos = getScrollPos();
    var offsetY = element.offsetTop - (headerTop + headerHeight + 20);

    if (offsetY == scrollPos.y) {
      return;
    }

    if (headerTop == 0  && offsetY > scrollPos.y) {
      offsetY += headerHeight + 2;
    } else if (headerTop < 0  && offsetY < scrollPos.y) {
      offsetY -= headerHeight - 2;
    }

    smoothScrollTo(offsetY);
  }

  // The first event occurred
  window.addEventListener('load', function(event) {
    if (window.location.hash) {
      hashLocate(window.location.hash);
    }
  });

  // The first event occurred
  window.addEventListener('click', function(event) {
    if (event.target.tagName.toLowerCase() == 'a') {
      hashLocate(event.target.getAttribute('href'));
    }
  });
</script>
<div class="theme-toggle">
  <input type="checkbox" id="theme-switch">
  <label for="theme-switch">
    <div class="toggle"></div>
    <div class="names">
      <p class="light">Light</p>
      <p class="dark">Dark</p>
    </div>
  </label>
</div>




<script>
  (function() {
    var sw = document.getElementById('theme-switch');
    var html = document.getElementsByTagName('html')[0];
    var nightModeOption = ('auto' || 'auto').toLowerCase();
    var storage = nightModeOption === 'manual'
        ? localStorage
        : sessionStorage;
    var themeData = loadThemeData();

    function saveThemeData(data) {
      storage.setItem('theme', JSON.stringify(data));
    }

    function loadThemeData() {
      var data = storage.getItem('theme');
      try {
        data = JSON.parse(data ? data : '');
      } catch(e) {
        data = { nightShift: undefined, autoToggleAt: 0 };
        saveThemeData(data);
      }
      return data;
    }

    function handleThemeToggle(nightShift) {
      themeData.nightShift = nightShift;
      saveThemeData(themeData);
      html.dataset.theme = nightShift ? 'dark' : 'light';
      setTimeout(function() {
        sw.checked = nightShift ? true : false;
      }, 50);
    }

    function autoThemeToggle() {
      // Next time point of theme toggle
      var now = new Date();
      var toggleAt = new Date();
      var hours = now.getHours();
      var nightShift = hours >= 19 || hours <=7;

      if (nightShift) {
        if (hours > 7) {
          toggleAt.setDate(toggleAt.getDate() + 1);
        }
        toggleAt.setHours(7);
      } else {
        toggleAt.setHours(19);
      }

      toggleAt.setMinutes(0);
      toggleAt.setSeconds(0);
      toggleAt.setMilliseconds(0)

      var delay = toggleAt.getTime() - now.getTime();

      // auto toggle theme mode
      setTimeout(function() {
        handleThemeToggle(!nightShift);
      }, delay);

      return {
        nightShift: nightShift,
        toggleAt: toggleAt.getTime()
      };
    }

    // Listen the theme toggle event
    sw.addEventListener('change', function(event) {
      handleThemeToggle(event.target.checked);
    });

    if (nightModeOption == 'auto') {
      var data = autoThemeToggle();

      // Toggle theme by local setting
      if (data.toggleAt > themeData.autoToggleAt) {
        themeData.autoToggleAt = data.toggleAt;
        handleThemeToggle(data.nightShift);
      } else {
        handleThemeToggle(themeData.nightShift);
      }
    } else if (nightModeOption == 'manual') {
      handleThemeToggle(themeData.nightShift);
    } else {
      var nightShift = themeData.nightShift;
      if (nightShift === undefined) {
        nightShift = nightModeOption === 'on';
      }
      handleThemeToggle(nightShift);
    }
  })();
</script>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="framework">
  <section class="main">

     <div class="post">
  <section>









<header class="post-header">
  <h1 class="post-title p-name" itemprop="name headline">[Coherence/Web] How to install Coherence Web 14c</h1>
  <h2 class="post-subtitle"></h2>

  <p class="post-meta">
    <time class="dt-published" datetime="2023-04-18T23:56:19+00:00" itemprop="datePublished"><i class="fa fa-calendar"></i> 2023-04-18
    </time>

    
    
































    <span class="post-reading-time left-vsplit"><i class="fa fa-clock-o"></i> About 19 mins</span>
  </p>
<div class="post-tags">
<a class="post-tag" href="/tags.html#Coherence">#Coherence</a><a class="post-tag" href="/tags.html#Web">#Web</a><a class="post-tag" href="/tags.html#Installation">#Installation</a>
</div></header>
<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

    <div class="post-content e-content" itemprop="articleBody">

      <h2 id="1-overview">1. Overview</h2>

<p>Coherence 14c 테스트 환경을 위해 기본 설치 환경을 집약한다.</p>

<p><br><br></p>

<h2 id="2-descriptions">2. Descriptions</h2>

<p>다음 환경을 구성하도록 한다.</p>

<ul>
  <li>cluster-base_domain
    <ul>
      <li>Coherence Server, TCP 9000 ~ 9100</li>
      <li>Managed Coherence Server, TCP 9000</li>
    </ul>
  </li>
</ul>

<p><br></p>

<p>아래 문서에서는 Coherence-Server를 Cache-Server,</p>

<p>Managed Coherence Server(WLS+Coherence Module)를 Cache-Client 라고 표현하기도 했다.</p>

<p>WLS 또한 자기 자신이 Cache-Server가 될 수 있으나, Coherence을 사용하는 목적은 WLS 에서는 Data를 처리하지 않는 것이기 때문이다.</p>

<p><br><br></p>

<h3 id="21-downloads">2.1 Downloads</h3>

<p><a href="https://edelivery.oracle.com">Oracle Software Delivery Cloud</a> 에서 Download 할 List</p>

<ul>
  <li>Oracle Coherence 14.1.1.0.0 (124.3 MB)</li>
</ul>

<p><br><br></p>

<h2 id="3-script">3. Script</h2>

<h3 id="31-engine">3.1 Engine</h3>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
</pre></td>
<td class="rouge-code"><pre><span class="nv">BASEDIR</span><span class="o">=</span>/sw/installFiles
<span class="nv">OS_USERNAME</span><span class="o">=</span><span class="si">$(</span><span class="nb">id</span> <span class="nt">--user</span> <span class="nt">--name</span><span class="si">)</span>
<span class="nv">OS_GROUPNAME</span><span class="o">=</span><span class="si">$(</span><span class="nb">id</span> <span class="nt">--group</span> <span class="nt">--name</span><span class="si">)</span>

<span class="nv">COH_INSTALL_FILE</span><span class="o">=</span><span class="k">${</span><span class="nv">BASEDIR</span><span class="k">}</span>/fmw_14.1.1.0.0_coherence.jar
<span class="nv">JAVA_HOME</span><span class="o">=</span>/sw/jdk/jdk1.8.0_351

<span class="nv">COH_INSTALL_PATH</span><span class="o">=</span>/sw/coherence/14c
<span class="nv">INVENTORY_PATH</span><span class="o">=</span>/sw/coherence/inventories/14c
<span class="nv">INVENTORY_GROUP</span><span class="o">=</span><span class="k">${</span><span class="nv">OS_GROUPNAME</span><span class="k">}</span>

<span class="nv">DOMAIN_NAME</span><span class="o">=</span>base_domain
<span class="nv">DOMAIN_HOME</span><span class="o">=</span><span class="k">${</span><span class="nv">COH_INSTALL_PATH</span><span class="k">}</span>/domains/<span class="k">${</span><span class="nv">DOMAIN_NAME</span><span class="k">}</span>

<span class="nv">CS_ADDR</span><span class="o">=</span>wls.local
<span class="nv">CS_PORT</span><span class="o">=</span>9000
<span class="nv">CS_PORT_ADJUST</span><span class="o">=</span>100


<span class="c"># (1) ResponseFile</span>
<span class="c"># https://docs.oracle.com/en/middleware/fusion-middleware/12.2.1.4/ouirf/sample-response-files-silent-installation-and-deinstallation.html#GUID-65B11C03-B559-41F1-B9B4-B7276491E580</span>
<span class="c"># INSTALL_TYPE is one of fmw_14.1.1.0.0_coherence.jar:/Disk1/stage/distributions/Coherence_14.1.1.0.0.xml</span>

<span class="nb">cat</span> <span class="o">&lt;&lt;</span> <span class="no">EOF</span><span class="sh"> &gt; </span><span class="k">${</span><span class="nv">BASEDIR</span><span class="k">}</span><span class="sh">/rsp
[ENGINE]
Response File Version=1.0.0.0.0
 
[GENERIC]
DECLINE_AUTO_UPDATES=true
ORACLE_HOME=</span><span class="k">${</span><span class="nv">COH_INSTALL_PATH</span><span class="k">}</span><span class="sh">
INSTALL_TYPE=Typical
</span><span class="no">EOF


</span><span class="c"># (2) Inventory</span>
<span class="c"># https://docs.oracle.com/en/middleware/fusion-middleware/12.2.1.4/ouirf/using-oracle-universal-installer-silent-mode.html#GUID-756E3FD9-4094-412F-9BEB-72C5FD51056B</span>
<span class="c"># * inventory.loc 파일 샘플은 문서에 없음</span>

<span class="nb">cat</span> <span class="o">&lt;&lt;</span> <span class="no">EOF</span><span class="sh"> &gt; </span><span class="k">${</span><span class="nv">BASEDIR</span><span class="k">}</span><span class="sh">/loc
inventory_loc=</span><span class="k">${</span><span class="nv">INVENTORY_PATH</span><span class="k">}</span><span class="sh">
inst_group=</span><span class="k">${</span><span class="nv">INVENTORY_GROUP</span><span class="k">}</span><span class="sh">
</span><span class="no">EOF


</span><span class="c"># (3) Installation</span>
<span class="c"># https://docs.oracle.com/en/middleware/fusion-middleware/12.2.1.4/ouirf/using-oracle-universal-installer-silent-mode.html#GUID-5F06D02F-6D71-45B9-BF41-5D5759D31958</span>

<span class="k">${</span><span class="nv">JAVA_HOME</span><span class="k">}</span>/bin/java <span class="nt">-jar</span> <span class="k">${</span><span class="nv">COH_INSTALL_FILE</span><span class="k">}</span> <span class="nt">-silent</span> <span class="nt">-responseFile</span> <span class="k">${</span><span class="nv">BASEDIR</span><span class="k">}</span>/rsp <span class="nt">-invPtrLoc</span> <span class="k">${</span><span class="nv">BASEDIR</span><span class="k">}</span>/loc
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p><br></p>

<h3 id="32-cache-configuration">3.2 Cache Configuration</h3>

<p>Cluster 내에서 유지할 Cache 에 대한 기본 속성을 정의할 수 있다.</p>

<p>해당 파일은 Cache-Server, Cache-Client 모두에서 사용된다.</p>

<p>XML 파일은 한 번만 정의되고 쓰이면 모두가 만족해야 될 것으로 이해했는데, 공식 가이드를 따라가보면 Server와 Client, 그리고 Client(WLS)에 배포된 App 내에서도 사용된다.</p>

<p>여기저기서 사용되는 것이 맞는지에 대한 것 때문에 혼동이 좀 있었는데,</p>

<p>App에서 생성하는 Cache는 Cache-Server에서도, Cache-Client에서도 모두 유지되기 위해서 기본 Cache 구성에 대한 정의가 있어야 되기 때문에 양쪽에 동일한 파일이 있어야 하는 것으로 <del>그냥</del> 이해했다.</p>

<p><br><br></p>

<ul>
  <li>
    <p><a href="https://docs.oracle.com/en/middleware/standalone/coherence/14.1.1.0/administer-http-sessions/using-coherenceweb-weblogic-server.html#GUID-24BDEA82-1E53-47F2-BD2B-E573639DADB5">Overview of Coherence*Web</a></p>

    <ul>
      <li>
        <p>coherence.jar, coherence-web.jar 파일이 공유 라이브러리로 배포되거나, Web application lib에 위치해야 한다.</p>

        <blockquote>
          <p>Web-App 아래에 배포되는 경우, Heap resource 낭비도 있거니와 Operational XML 파일을 Load하는데도 문제가 있으므로 사실상 Shared Library($DOMAIN_HOME/lib)에 배포해야 한다.</p>
        </blockquote>
      </li>
      <li>
        <p>기본 Cache 구성 파일은, coherence-web.jar 에 default-session-cache-config.xml 가 있다.</p>

        <div class="language-sh highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td>
<td class="rouge-code"><pre><span class="nv">$ </span>jar <span class="nt">-xf</span> coherence-web.jar default-session-cache-config.xml
<span class="nv">$ </span><span class="nb">mv </span>default-session-cache-config.xml session-cache-config.xml
</pre></td>
</tr></tbody></table></code></pre></div>        </div>

        <blockquote>
          <p>해당 파일을 추출하여, Coherence , WLS, App 내에서 다양하게 사용된다.</p>
        </blockquote>
      </li>
      <li>
        <p><a href="https://docs.oracle.com/en/middleware/standalone/coherence/14.1.1.0/administer-http-sessions/using-coherenceweb-weblogic-server.html#GUID-16EF76E3-D55A-4823-8035-81873199E796">Using a Custom Session Cache Configuration File</a>)에 따라 기본 Cache 구성 파일을 변경할 수 있다.</p>
      </li>
      <li>
        <p>기본 Cache 구성 파일은, WEB-INF/classes 에 배치한다. 없으면, coherence-web.jar에서 default-session-cache-config.xml 을 로드한다.</p>

        <blockquote>
          <p>coherence-web.jar 를 App/lib 내에 배포하지 않으면 Cache 구성 파일을 Load 하지 않아 에러가 있다, xml 을 반드시 배포하거나, jar 파일을 Shared Library 가 아닌, App/lib 에 배포 해야 한다.</p>
        </blockquote>
      </li>
      <li>
        <p>위 설명에서, 기본 Cache 구성 파일 이름 변경(session-cache-config.xml 이름이 아닌)하여 web.xml 에서 경로를 입력 가능하다고 하지만 문서 버그인지 방법이 나타나 있지 않다. Option 으로 설정할 수 있다.</p>

        <div class="language-sh highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
</pre></td>
<td class="rouge-code"><pre>coherence.cache.configuration.path<span class="o">=</span>xml
</pre></td>
</tr></tbody></table></code></pre></div>        </div>

        <blockquote>
          <p>배포한 App이 한 개 뿐이라면 유용하겠으나, 일반적으로 그렇지 않으니 classes 에 session-cache-config.xml 넣는 것이 강제될 수 있겠다.</p>
        </blockquote>
      </li>
      <li>
        <p>기본적으로 local-storage가 false로 설정되어 있기 때문에, XML을 수정하거나 Option을 설정한다. Cache-Client에서는 false를 사용하면 되겠다.</p>

        <div class="language-sh highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
</pre></td>
<td class="rouge-code"><pre>coherence.session.localstorage<span class="o">=</span><span class="nb">true</span>
</pre></td>
</tr></tbody></table></code></pre></div>        </div>
        <p>여기서 언급한 coherence.jar, coherence-web.jar, session-cache-config.xml 파일은 Cache-Server, Cache-Client 에서 모두 사용되므로 각 디렉토리로 적절히 복사가 되어야 한다.</p>
      </li>
    </ul>
  </li>
</ul>

<p><br></p>

<p>아래는, 앞으로 우리가 구축할 WLS와 Coherence Domain 디렉토리에 복제될 파일 목록들이다.</p>

<blockquote>
  <p><a href="#h-321-cluster">3.2.1 Cluster</a>을 먼저 수행한다.</p>
</blockquote>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td>
<td class="rouge-code"><pre><span class="c"># Cache-Client가 될 WLS 에 복사</span>
<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-al</span> &lt;WEBLOGIC-DOMAIN-HOME&gt;/lib/<span class="k">*</span>
<span class="nt">-rw-r-----</span> 1 wasadm wasadm 13763107 Apr 20 15:29 coherence.jar
<span class="nt">-rw-r-----</span> 1 wasadm wasadm   241893 Apr 20 15:29 coherence-web.jar
<span class="nt">-rw-rw-r--</span> 1 wasadm wasadm     4337 Apr 20 15:38 session-cache-config.xml

<span class="c"># Cache-Server가 될 Coherence 에 복사</span>
<span class="nv">$ </span><span class="nb">cd</span> &lt;COHERENCE-DOMAIN-HOME&gt;/lib/
<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-al</span> coherence.jar coherence-web.jar session-cache-config.xml
<span class="nt">-rw-r-----</span> 1 wasadm wasadm 13763107 Mar 26  2020 coherence.jar
<span class="nt">-rw-r-----</span> 1 wasadm wasadm   241893 Mar 26  2020 coherence-web.jar
<span class="nt">-rw-rw-r--</span> 1 wasadm wasadm     4337 Apr 20 15:24 session-cache-config.xml
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p><br></p>

<h3 id="32-cache-server">3.2 Cache-Server</h3>

<h4 id="321-cluster">3.2.1 Cluster</h4>

<p>Coherence 구성을 위해서는 많은 설정 값이 필요하지만, <a href="https://docs.oracle.com/en/middleware/standalone/coherence/14.1.1.0/develop-applications/understanding-configuration.html#GUID-8387E29A-EE03-4075-B4E7-D92779335965">Using the Default Operational Override File</a> 방식을 사용하여, 일부분 설정값만 override 하도록 한다.</p>

<p><br></p>

<p><a href="https://docs.oracle.com/en/middleware/standalone/coherence/14.1.1.0/develop-applications/understanding-configuration.html#GUID-1C518560-021D-4F55-ACC4-C0E10133D45A">Specifying an Operational Override File</a> 에 설명된 <code class="language-plaintext highlighter-rouge">-Dcoherence.override</code> 옵션으로 아래 설정 파일을 사용할 것이다.</p>

<p><br></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
</pre></td>
<td class="rouge-code"><pre><span class="c"># (4) Cluster Member</span>
<span class="c"># Cache Server에는 WLS Domain과 같은 개념이 없으나, 임의로 만듬</span>

<span class="nb">mkdir</span> <span class="nt">-p</span> <span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>/logs
<span class="nb">cp</span> <span class="nt">-pR</span> <span class="k">${</span><span class="nv">COH_INSTALL_PATH</span><span class="k">}</span>/coherence/lib <span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>

<span class="c"># https://docs.oracle.com/en/middleware/standalone/coherence/14.1.1.0/develop-applications/setting-cluster.html#GUID-E3DCA888-1155-4E95-BDC7-668719C86F69</span>

<span class="nb">cat</span> <span class="o">&lt;&lt;</span> <span class="no">EOF</span><span class="sh"> &gt; </span><span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span><span class="sh">/lib/tangosol-coherence-</span><span class="k">${</span><span class="nv">DOMAIN_NAME</span><span class="k">}</span><span class="sh">.xml
&lt;?xml version='1.0'?&gt;
&lt;coherence xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://xmlns.oracle.com/coherence/coherence-operational-config" xsi:schemaLocation="http://xmlns.oracle.com/coherence/coherence-operational-config.xsd"&gt;
   
  &lt;cluster-config&gt;
    &lt;member-identity&gt;
      &lt;cluster-name system-property="coherence.cluster"&gt;cluster_</span><span class="k">${</span><span class="nv">DOMAIN_NAME</span><span class="k">}</span><span class="sh">&lt;/cluster-name&gt;
      &lt;site-name    system-property="coherence.site"&gt;site_</span><span class="k">${</span><span class="nv">DOMAIN_NAME</span><span class="k">}</span><span class="sh">&lt;/site-name&gt;
      &lt;rack-name    system-property="coherence.rack"&gt;rack_</span><span class="k">${</span><span class="nv">DOMAIN_NAME</span><span class="k">}</span><span class="sh">&lt;/rack-name&gt;
      &lt;machine-name system-property="coherence.machine"&gt;machine_</span><span class="k">${</span><span class="nv">DOMAIN_NAME</span><span class="k">}</span><span class="sh">&lt;/machine-name&gt;
      &lt;process-name system-property="coherence.process"&gt;process_</span><span class="k">${</span><span class="nv">DOMAIN_NAME</span><span class="k">}</span><span class="sh">&lt;/process-name&gt;
      &lt;member-name  system-property="coherence.member"&gt;member_</span><span class="k">${</span><span class="nv">DOMAIN_NAME</span><span class="k">}</span><span class="sh">&lt;/member-name&gt;
      &lt;role-name    system-property="coherence.role"&gt;CoherenceServer&lt;/role-name&gt;
      &lt;priority     system-property="coherence.priority"&gt;5&lt;/priority&gt;
    &lt;/member-identity&gt;
  
    &lt;unicast-listener&gt; 
      &lt;address system-property="coherence.localhost"&gt;</span><span class="k">${</span><span class="nv">CS_ADDR</span><span class="k">}</span><span class="sh">&lt;/address&gt;
      &lt;port system-property="coherence.localport"&gt;</span><span class="k">${</span><span class="nv">CS_PORT</span><span class="k">}</span><span class="sh">&lt;/port&gt;
      &lt;port-auto-adjust system-property="coherence.localport.adjust"&gt;</span><span class="k">$((</span>CS_PORT+CS_PORT_ADJUST<span class="k">))</span><span class="sh">&lt;/port-auto-adjust&gt;

      &lt;well-known-addresses&gt; 
        &lt;address id="1" system-property="coherence.wka"&gt;</span><span class="k">${</span><span class="nv">CS_ADDR</span><span class="k">}</span><span class="sh">&lt;/address&gt; 
        &lt;!--&lt;address id="2" system-property="coherence.wka2"&gt;</span><span class="k">${</span><span class="nv">CS_ADDR</span><span class="k">}</span><span class="sh">&lt;/address&gt;--&gt;
      &lt;/well-known-addresses&gt;
    &lt;/unicast-listener&gt;
     
    &lt;tcp-ring-listener&gt;
      &lt;enabled&gt;true&lt;/enabled&gt;
      &lt;ip-timeout system-property="coherence.ipmonitor.pingtimeout"&gt;25s&lt;/ip-timeout&gt;
      &lt;ip-attempts&gt;5&lt;/ip-attempts&gt;
      &lt;listen-backlog&gt;10&lt;/listen-backlog&gt;
    &lt;/tcp-ring-listener&gt;

    &lt;packet-publisher&gt;
      &lt;packet-delivery&gt;
        &lt;heartbeat-milliseconds&gt;5000&lt;/heartbeat-milliseconds&gt;
      &lt;/packet-delivery&gt;
    &lt;/packet-publisher&gt;
  &lt;/cluster-config&gt;
&lt;/coherence&gt;
</span><span class="no">EOF
</span></pre></td>
</tr></tbody></table></code></pre></div></div>

<p><a href="#h-322-startup-cache-server">3.2.2 Startup Cache-Server</a>에서 설명하듯이, 우리가 생성한 <code class="language-plaintext highlighter-rouge">tangosol-coherence-${DOMAIN_NAME}.xml</code> 파일은 다음 처럼 Option이 설정되어야 한다.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td>
<td class="rouge-code"><pre><span class="nt">-Dcoherence</span>.override<span class="o">=</span>tangosol-coherence-override-<span class="k">${</span><span class="nv">DOMAIN_NAME</span><span class="k">}</span>.xml
<span class="nv">CLASSPATH</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">CLASSPATH</span><span class="k">}</span><span class="s2">:</span><span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span><span class="s2">/lib
</span></pre></td>
</tr></tbody></table></code></pre></div></div>

<p>CLASSPATH 에 있는 xml 파일을 override 할 수 있다.</p>

<p><br><br></p>

<h4 id="322-startup-cache-server">3.2.2 Startup Cache-Server</h4>

<ul>
  <li>
<a href="https://docs.oracle.com/en/middleware/standalone/coherence/14.1.1.0/administer-http-sessions/using-coherenceweb-weblogic-server.html#GUID-D8120C85-FCD3-491E-8618-03B691279797">Start a Cache Server</a>
    <ul>
      <li>Coherence 는 기본적으로 WLS 하위 subsystem으로 (즉 같은 JVM) 유지되면, WLS와 같은 lifecycle을 공유한다. 이러한 경우 Managed Coherence Server 라고 부른다.</li>
    </ul>
  </li>
</ul>

<p><br></p>

<ul>
  <li>
    <p><a href="https://docs.oracle.com/en/middleware/standalone/coherence/14.1.1.0/administer-http-sessions/using-coherenceweb-weblogic-server.html#GUID-E65D5FAC-B517-4F59-8AF7-8458AE1216C1">To Start a Standalone Coherence Cache Server</a></p>

    <ul>
      <li>
        <p>Cache Server를 독립 실행, 아래에서 이 방식을 사용하는 Script를 설명했다.</p>
      </li>
      <li>
        <p>문서 상에는, <code class="language-plaintext highlighter-rouge">coherence.cacheconfig</code> 파일의 절대경로를 사용하라고 되어 있지만, CLASSPATH 에서 가져오는 것으로 테스트 되므로 아래와 같이 조치해야 한다.</p>

        <div class="language-sh highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td>
<td class="rouge-code"><pre><span class="nt">-Dcoherence</span>.cacheconfig<span class="o">=</span>session-cache-config.xml
<span class="nv">CLASSPATH</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">CLASSPATH</span><span class="k">}</span><span class="s2">:</span><span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span><span class="s2">/lib
</span></pre></td>
</tr></tbody></table></code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ul>

<p><br></p>

<p>아래 스크립트는 Cache-Server 2개를 생성한다.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
</pre></td>
<td class="rouge-code"><pre><span class="c"># (5) Create Cache-Server Script</span>
<span class="c"># https://docs.oracle.com/en/middleware/standalone/coherence/14.1.1.0/administer-http-sessions/using-coherenceweb-weblogic-server.html#GUID-ECE861D6-450C-494C-8DD7-E9AA15AFF6E3</span>

<span class="nb">cat</span> <span class="o">&lt;&lt;</span> <span class="sh">"</span><span class="no">EOF</span><span class="sh">" &gt; </span><span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span><span class="sh">/startCS.sh
#!/bin/sh
JAVA_HOME=#JAVA_HOME#
DOMAIN_NAME=#DOMAIN_NAME#
DOMAIN_HOME=#DOMAIN_HOME#
SERVER_NAME=#SERVER_NAME#

LOG_HOME=</span><span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span><span class="sh">/logs
NOHUP_LOG=</span><span class="k">${</span><span class="nv">LOG_HOME</span><span class="k">}</span><span class="sh">/nohup
GC_LOG=</span><span class="k">${</span><span class="nv">LOG_HOME</span><span class="k">}</span><span class="sh">/gc
HEAPDUMP_DIR=</span><span class="k">${</span><span class="nv">LOG_HOME</span><span class="k">}</span><span class="sh">/heapdump
LOG_TIME=</span><span class="si">$(</span><span class="nb">date</span> +%y%m%d_%H%M<span class="si">)</span><span class="sh">

##### Make Path #####
mkdir -p </span><span class="k">${</span><span class="nv">LOG_HOME</span><span class="k">}</span><span class="sh"> </span><span class="k">${</span><span class="nv">NOHUP_LOG</span><span class="k">}</span><span class="sh"> </span><span class="k">${</span><span class="nv">GC_LOG</span><span class="k">}</span><span class="sh"> </span><span class="k">${</span><span class="nv">HEAPDUMP_DIR</span><span class="k">}</span><span class="sh">
###################

##### User Check #####
USER=#OS_USERNAME#
if [ "</span><span class="nv">$USER</span><span class="sh">" != </span><span class="si">$(</span>/usr/bin/whoami<span class="si">)</span><span class="sh"> ]; then
     echo "* you do not have permission. *"
     exit;
fi
####################

## Process Check ##
COH_PID=</span><span class="si">$(</span><span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>/ps<span class="k">${</span><span class="nv">SERVER_NAME</span><span class="k">}</span>.sh<span class="si">)</span><span class="sh">
if [ "</span><span class="nv">$COH_PID</span><span class="sh">" != "" ]; then
     echo "Server already Started."
     exit;
fi
###################

##### gc log rotation #####
mv </span><span class="k">${</span><span class="nv">GC_LOG</span><span class="k">}</span><span class="sh">/gc_</span><span class="k">${</span><span class="nv">SERVER_NAME</span><span class="k">}</span><span class="sh">.out </span><span class="k">${</span><span class="nv">GC_LOG</span><span class="k">}</span><span class="sh">/gc_</span><span class="k">${</span><span class="nv">SERVER_NAME</span><span class="k">}</span><span class="sh">.out.</span><span class="k">${</span><span class="nv">LOG_TIME</span><span class="k">}</span><span class="sh">
USER_MEM_ARGS="</span><span class="k">${</span><span class="nv">USER_MEM_ARGS</span><span class="k">}</span><span class="sh"> -verbose:gc -Xloggc:</span><span class="k">${</span><span class="nv">GC_LOG</span><span class="k">}</span><span class="sh">/gc_</span><span class="k">${</span><span class="nv">SERVER_NAME</span><span class="k">}</span><span class="sh">.out"
######################

##### Heap dump #####
USER_MEM_ARGS="</span><span class="k">${</span><span class="nv">USER_MEM_ARGS</span><span class="k">}</span><span class="sh"> -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=</span><span class="k">${</span><span class="nv">HEAPDUMP_DIR</span><span class="k">}</span><span class="sh">"
####################

USER_MEM_ARGS="</span><span class="k">${</span><span class="nv">USER_MEM_ARGS</span><span class="k">}</span><span class="sh"> -server"
USER_MEM_ARGS="</span><span class="k">${</span><span class="nv">USER_MEM_ARGS</span><span class="k">}</span><span class="sh"> -D</span><span class="k">${</span><span class="nv">SERVER_NAME</span><span class="k">}</span><span class="sh">"
USER_MEM_ARGS="</span><span class="k">${</span><span class="nv">USER_MEM_ARGS</span><span class="k">}</span><span class="sh"> -Xms1024m -Xmx1024m -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=128m"
USER_MEM_ARGS="</span><span class="k">${</span><span class="nv">USER_MEM_ARGS</span><span class="k">}</span><span class="sh"> -Djava.net.preferIPv4Stack=true -Djava.net.preferIPv6Addresses=false"
export USER_MEM_ARGS

COHERENCE_ARGS="</span><span class="k">${</span><span class="nv">COHERENCE_ARGS</span><span class="k">}</span><span class="sh"> -Dcoherence.mode=prod"
COHERENCE_ARGS="</span><span class="k">${</span><span class="nv">COHERENCE_ARGS</span><span class="k">}</span><span class="sh"> -Dcoherence.cacheconfig=session-cache-config.xml"
COHERENCE_ARGS="</span><span class="k">${</span><span class="nv">COHERENCE_ARGS</span><span class="k">}</span><span class="sh"> -Dcoherence.override=tangosol-coherence-</span><span class="k">${</span><span class="nv">DOMAIN_NAME</span><span class="k">}</span><span class="sh">.xml"
COHERENCE_ARGS="</span><span class="k">${</span><span class="nv">COHERENCE_ARGS</span><span class="k">}</span><span class="sh"> -Dcoherence.session.localstorage=true"
COHERENCE_ARGS="</span><span class="k">${</span><span class="nv">COHERENCE_ARGS</span><span class="k">}</span><span class="sh"> -Dcoherence.management.remote=true"
export COHERENCE_ARGS

CLASSPATH="</span><span class="k">${</span><span class="nv">CLASSPATH</span><span class="k">}</span><span class="sh">:</span><span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span><span class="sh">/lib"
CLASSPATH="</span><span class="k">${</span><span class="nv">CLASSPATH</span><span class="k">}</span><span class="sh">:</span><span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span><span class="sh">/lib/coherence-web.jar"
CLASSPATH="</span><span class="k">${</span><span class="nv">CLASSPATH</span><span class="k">}</span><span class="sh">:</span><span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span><span class="sh">/lib/coherence.jar"
export CLASSPATH

mv </span><span class="k">${</span><span class="nv">NOHUP_LOG</span><span class="k">}</span><span class="sh">/</span><span class="k">${</span><span class="nv">SERVER_NAME</span><span class="k">}</span><span class="sh">.out </span><span class="k">${</span><span class="nv">NOHUP_LOG</span><span class="k">}</span><span class="sh">/</span><span class="k">${</span><span class="nv">SERVER_NAME</span><span class="k">}</span><span class="sh">.out.</span><span class="k">${</span><span class="nv">LOG_TIME</span><span class="k">}</span><span class="sh">
nohup </span><span class="k">${</span><span class="nv">JAVA_HOME</span><span class="k">}</span><span class="sh">/bin/java </span><span class="k">${</span><span class="nv">USER_MEM_ARGS</span><span class="k">}</span><span class="sh"> </span><span class="k">${</span><span class="nv">COHERENCE_ARGS</span><span class="k">}</span><span class="sh"> -cp </span><span class="k">${</span><span class="nv">CLASSPATH</span><span class="k">}</span><span class="sh"> com.tangosol.net.DefaultCacheServer &gt; </span><span class="k">${</span><span class="nv">NOHUP_LOG</span><span class="k">}</span><span class="sh">/</span><span class="k">${</span><span class="nv">SERVER_NAME</span><span class="k">}</span><span class="sh">.out 2&gt;&amp;1 &amp;
</span><span class="no">EOF


</span><span class="nb">cat</span> <span class="o">&lt;&lt;</span> <span class="sh">"</span><span class="no">EOF</span><span class="sh">" &gt; </span><span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span><span class="sh">/psCS.sh
#!/bin/sh
DOMAIN_HOME=#DOMAIN_HOME#
SERVER_NAME=#SERVER_NAME#

ps -ef | grep "java" | grep "com.tangosol.net.DefaultCacheServer" | grep "</span><span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span><span class="sh">" | grep "D</span><span class="k">${</span><span class="nv">SERVER_NAME</span><span class="k">}</span><span class="sh">"
</span><span class="no">EOF


</span><span class="nb">cat</span> <span class="o">&lt;&lt;</span> <span class="sh">"</span><span class="no">EOF</span><span class="sh">" &gt; </span><span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span><span class="sh">/stopCS.sh
#!/bin/sh
DOMAIN_HOME=#DOMAIN_HOME#
SERVER_NAME=#SERVER_NAME#

##### User Check #####
USER=#OS_USERNAME#
if [ "</span><span class="nv">$USER</span><span class="sh">" != </span><span class="si">$(</span>/usr/bin/whoami<span class="si">)</span><span class="sh"> ]; then
     echo "* you do not have permission. *"
     exit;
fi
####################

## Process Check ##
COH_PID=</span><span class="si">$(</span><span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>/ps<span class="k">${</span><span class="nv">SERVER_NAME</span><span class="k">}</span>.sh<span class="si">)</span><span class="sh">
if [ "</span><span class="nv">$COH_PID</span><span class="sh">" == "" ]; then
     echo "Server already Stopped."
     exit;
fi
###################

kill -9 </span><span class="si">$(</span><span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>/ps<span class="k">${</span><span class="nv">SERVER_NAME</span><span class="k">}</span>.sh | <span class="nb">awk</span> <span class="s1">'{print $2}'</span><span class="si">)</span><span class="sh">
</span><span class="no">EOF


</span><span class="nb">cat</span> <span class="o">&lt;&lt;</span> <span class="sh">"</span><span class="no">EOF</span><span class="sh">" &gt; </span><span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span><span class="sh">/logCS.sh
#!/bin/sh
DOMAIN_NAME=#DOMAIN_NAME#
DOMAIN_HOME=#DOMAIN_HOME#
SERVER_NAME=#SERVER_NAME#

LOG_HOME=</span><span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span><span class="sh">/logs
NOHUP_LOG=</span><span class="k">${</span><span class="nv">LOG_HOME</span><span class="k">}</span><span class="sh">/nohup
tail -10f </span><span class="k">${</span><span class="nv">NOHUP_LOG</span><span class="k">}</span><span class="sh">/</span><span class="k">${</span><span class="nv">SERVER_NAME</span><span class="k">}</span><span class="sh">.out
</span><span class="no">EOF


</span><span class="nb">cp</span> <span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>/startCS.sh <span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>/startCS1.sh
<span class="nb">cp</span> <span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>/stopCS.sh <span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>/stopCS1.sh
<span class="nb">cp</span> <span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>/logCS.sh <span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>/logCS1.sh
<span class="nb">cp</span> <span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>/psCS.sh <span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>/psCS1.sh

<span class="nb">cp</span> <span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>/startCS.sh <span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>/startCS2.sh
<span class="nb">cp</span> <span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>/stopCS.sh <span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>/stopCS2.sh
<span class="nb">cp</span> <span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>/logCS.sh <span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>/logCS2.sh
<span class="nb">cp</span> <span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>/psCS.sh <span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>/psCS2.sh

<span class="nb">sed</span> <span class="nt">-i</span> <span class="s2">"s|#OS_USERNAME#|</span><span class="k">${</span><span class="nv">OS_USERNAME</span><span class="k">}</span><span class="s2">|g"</span> <span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>/<span class="k">*</span>CS1.sh
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s2">"s|#JAVA_HOME#|</span><span class="k">${</span><span class="nv">JAVA_HOME</span><span class="k">}</span><span class="s2">|g"</span> <span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>/<span class="k">*</span>CS1.sh
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s2">"s|#DOMAIN_NAME#|</span><span class="k">${</span><span class="nv">DOMAIN_NAME</span><span class="k">}</span><span class="s2">|g"</span> <span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>/<span class="k">*</span>CS1.sh
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s2">"s|#DOMAIN_HOME#|</span><span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span><span class="s2">|g"</span> <span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>/<span class="k">*</span>CS1.sh
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s2">"s|#SERVER_NAME#|CS1|g"</span> <span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>/<span class="k">*</span>CS1.sh

<span class="nb">sed</span> <span class="nt">-i</span> <span class="s2">"s|#OS_USERNAME#|</span><span class="k">${</span><span class="nv">OS_USERNAME</span><span class="k">}</span><span class="s2">|g"</span> <span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>/<span class="k">*</span>CS2.sh
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s2">"s|#JAVA_HOME#|</span><span class="k">${</span><span class="nv">JAVA_HOME</span><span class="k">}</span><span class="s2">|g"</span> <span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>/<span class="k">*</span>CS2.sh
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s2">"s|#DOMAIN_NAME#|</span><span class="k">${</span><span class="nv">DOMAIN_NAME</span><span class="k">}</span><span class="s2">|g"</span> <span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>/<span class="k">*</span>CS2.sh
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s2">"s|#DOMAIN_HOME#|</span><span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span><span class="s2">|g"</span> <span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>/<span class="k">*</span>CS2.sh
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s2">"s|#SERVER_NAME#|CS2|g"</span> <span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>/<span class="k">*</span>CS2.sh

<span class="nb">chmod </span>700 <span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>/<span class="k">*</span>.sh
<span class="nb">rm</span> <span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>/<span class="k">*</span>CS.sh
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p>Cache-Server를 기동하면, 표준출력 log에서 몇가지를 확인할 수 있다. 우리가 커스텀한 설정 파일대로 생성이 된다.</p>

<ul>
  <li>Loaded operational configuration from “jar:file:/sw/coherence/14c/domains/base_domain/lib/coherence.jar!/tangosol-coherence.xml”</li>
  <li>Loaded operational overrides from “jar:file:/sw/coherence/14c/domains/base_domain/lib/coherence.jar!/tangosol-coherence-override-<strong>prod.xml</strong>”
    <ul>
      <li>기본값 <code class="language-plaintext highlighter-rouge">-Dcoherence.mode=prod</code> 가 적용되어 있는 모습</li>
    </ul>
  </li>
  <li>Loaded operational overrides from “file:/sw/coherence/14c/domains/base_domain/lib/<strong>tangosol-coherence-base_domain.xml</strong>”</li>
  <li>Loaded cache configuration from “file:/sw/coherence/14c/domains/base_domain/lib/<strong>session-cache-config.xml</strong>”</li>
  <li>Created a new cluster “cluster_base_domain” with Member(Id=1, Timestamp=2023-04-24 11:43:24.509, Address=<strong>10.65.34.245:9000</strong>, MachineId=7674, Location=site:site_base_domain,rack:rack_base_domain,machine:machine_base_domain,process:process_base_domain,member:member_base_domain, Role=CoherenceServer, Edition=Grid Edition, <strong>Mode=Production</strong>, CpuCount=4, SocketCount=1)</li>
  <li>PartitionedCache{Name=oracle.coherence.web:<strong>DistributedSessions</strong>, State=(SERVICE_STARTED), Id=4, OldestMemberId=1, <strong>LocalStorage=enabled</strong>, PartitionCount=257, BackupCount=1, AssignedPartitions=0, BackupPartitions=0, CoordinatorId=1}</li>
</ul>

<p><br><br></p>

<h3 id="33-cache-client">3.3 Cache-Client</h3>

<p>Cache-Client로 WebLogic Managed Server를 사용할 것이다.</p>

<p>사실상, WebLogic 또한 Cache Server로 띄우는 것이므로 위에서 언급한 Managed Coherence Server가 된다.</p>

<p><br></p>

<p>다음의 옵션을 WLS Instance에서 사용한다.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td>
<td class="rouge-code"><pre><span class="nt">-Dcoherence</span>.mode<span class="o">=</span>prod
<span class="nt">-Dcoherence</span>.override<span class="o">=</span>tangosol-coherence-<span class="k">${</span><span class="nv">DOMAIN_NAME</span><span class="k">}</span>.xml
<span class="nt">-Dcoherence</span>.session.localstorage<span class="o">=</span><span class="nb">false</span>
<span class="nt">-Dcoherence</span>.management.remote<span class="o">=</span><span class="nb">true</span>


<span class="c"># lib 아래 jar는 자동 등록되므로 필요 없다, xml 을 위해 사용한다.</span>
<span class="nv">CLASSPATH</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">CLASSPATH</span><span class="k">}</span><span class="s2">:</span><span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span><span class="s2">/lib
#CLASSPATH="</span><span class="k">${</span><span class="nv">CLASSPATH</span><span class="k">}</span>:<span class="k">${</span><span class="nv">DOMAIN_HOME</span><span class="k">}</span>/lib/coherence-web.jar
<span class="c">#CLASSPATH="${CLASSPATH}:${DOMAIN_HOME}/lib/coherence.jar</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">-Dcoherence.cacheconfig=session-cache-config.xml</code> 옵션은 제거하였고, 해당 파일은 앞으로 배포할 Web App/WEB-INF/classes 아래에 직접 넣었다.</p>

<p>Application 마다 Cache 구성이 다를 수 있기 때문이다.</p>

<p><br></p>

<p>그리고 <code class="language-plaintext highlighter-rouge">coherence.override</code> 으로 읽어들이는 파일은, 위에서 언급하였는데, CLASSPATH 에서 읽으므로 <code class="language-plaintext highlighter-rouge">Web App/WEB-INF/lib</code> 에 넣을 경우, 검색하는 CLASSLOAD와 관련된 문제 인지 읽을 수 없다, 어차피 Server 배포 파일이므로 App에 넣는 경우도 없을 것이다.</p>

<p><br></p>

<p>인스턴스 기동 시에, 별다른 Log가 기록되지 않는다.</p>

<p><a href="#h-34-web-app-%EB%B0%B0%ED%8F%AC">3.4 Web-App 배포</a> 시에 Log가 출력되었다.</p>

<p><br><br></p>

<h3 id="34-web-app-배포">3.4 Web-App 배포</h3>

<ul>
  <li>
    <p>session-cache-config.xml 배치 구성도.</p>

    <div class="language-sh highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td>
<td class="rouge-code"><pre><span class="nv">$ </span>tree &lt;WEB-APP&gt;/WEB-INF/
&lt;WEB-APP&gt;/WEB-INF/
├── classes
│   └── session-cache-config.xml
├── weblogic.xml
└── web.xml
</pre></td>
</tr></tbody></table></code></pre></div>    </div>
  </li>
</ul>

<p><br></p>

<ul>
  <li>weblogic.xml 구성
    <ul>
      <li>timeout-secs : Weblogic Session의 유효 기간</li>
      <li>invalidation-interval-secs : Coherence Session Reaper Thread가 60초마다 실행된다.</li>
      <li>persistent-store-type : coherence-web</li>
    </ul>
  </li>
</ul>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td>
<td class="rouge-code"><pre>    <span class="nt">&lt;container-descriptor&gt;</span>
        <span class="nt">&lt;servlet-reload-check-secs&gt;</span>1<span class="nt">&lt;/servlet-reload-check-secs&gt;</span>
        <span class="nt">&lt;resource-reload-check-secs&gt;</span>1<span class="nt">&lt;/resource-reload-check-secs&gt;</span>
    <span class="nt">&lt;/container-descriptor&gt;</span>

    <span class="nt">&lt;jsp-descriptor&gt;</span>
        <span class="nt">&lt;page-check-seconds&gt;</span>1<span class="nt">&lt;/page-check-seconds&gt;</span>
    <span class="nt">&lt;/jsp-descriptor&gt;</span>

    <span class="nt">&lt;session-descriptor&gt;</span>
        <span class="nt">&lt;timeout-secs&gt;</span>30<span class="nt">&lt;/timeout-secs&gt;</span>
        <span class="nt">&lt;invalidation-interval-secs&gt;</span>60<span class="nt">&lt;/invalidation-interval-secs&gt;</span>
        <span class="nt">&lt;persistent-store-type&gt;</span>coherence-web<span class="nt">&lt;/persistent-store-type&gt;</span>
    <span class="nt">&lt;/session-descriptor&gt;</span>
<span class="nt">&lt;/weblogic-web-app&gt;</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p>App을 Deploy 시에 Log</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td>
<td class="rouge-code"><pre>&lt;Module coh14cApp of application coh14cApp is transitioning from STATE_NEW to STATE_PREPARED on server M1.&gt;

... Loaded operational configuration from <span class="s2">"jar:file:/sw/weblogic/14c/coherence/lib/coherence.jar!/tangosol-coherence.xml"</span>

... Loaded operational overrides from <span class="s2">"jar:file:/sw/weblogic/14c/coherence/lib/coherence.jar!/tangosol-coherence-override-prod.xml"</span>

... Loaded operational overrides from <span class="s2">"file:/sw/weblogic/14c/domains/base_domain/lib/tangosol-coherence-base_domain.xml"</span>

Oracle Coherence Version 14.1.1.0.0 Build 77467
 Grid Edition: Production mode
Copyright <span class="o">(</span>c<span class="o">)</span> 2000, 2020, Oracle and/or its affiliates. All rights reserved.

... Loaded cache configuration from <span class="s2">"file:/sw/app/coh14cApp/WEB-INF/classes/session-cache-config.xml"</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p>App을 Runtime Service로 시작시에 Log.</p>

<p>기존(Senior) Member으로 Joined 되는 과정</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td>
<td class="rouge-code"><pre>&lt;Module coh14cApp of application coh14cApp is transitioning from STATE_PREPARED to STATE_ADMIN on server M1.&gt;

...  Member<span class="o">(</span><span class="nv">Id</span><span class="o">=</span>1, <span class="nv">Timestamp</span><span class="o">=</span>2023-04-24 11:43:24.509, <span class="nv">Address</span><span class="o">=</span>10.65.34.245:9000, <span class="nv">MachineId</span><span class="o">=</span>7674, <span class="nv">Location</span><span class="o">=</span>site:site_base_domain,rack:rack_base_domain,machine:machine_base_domain,process:process_base_domain,member:member_base_domain, <span class="nv">Role</span><span class="o">=</span>CoherenceServer<span class="o">)</span> joined Cluster with senior member 1
 
... This Member<span class="o">(</span><span class="nv">Id</span><span class="o">=</span>2, <span class="nv">Timestamp</span><span class="o">=</span>2023-04-24 12:05:26.569, <span class="nv">Address</span><span class="o">=</span>10.65.34.245:9002, <span class="nv">MachineId</span><span class="o">=</span>7674, <span class="nv">Location</span><span class="o">=</span>site:site_base_domain,rack:rack_base_domain,machine:machine_base_domain,process:process_base_domain,member:member_base_domain, <span class="nv">Role</span><span class="o">=</span>CoherenceServer, <span class="nv">Edition</span><span class="o">=</span>Grid Edition, <span class="nv">Mode</span><span class="o">=</span>Production, <span class="nv">CpuCount</span><span class="o">=</span>4, <span class="nv">SocketCount</span><span class="o">=</span>1<span class="o">)</span> joined cluster <span class="s2">"cluster_base_domain"</span> with senior Member<span class="o">(</span><span class="nv">Id</span><span class="o">=</span>1, <span class="nv">Timestamp</span><span class="o">=</span>2023-04-24 11:43:24.509, <span class="nv">Address</span><span class="o">=</span>10.65.34.245:9000, <span class="nv">MachineId</span><span class="o">=</span>7674, <span class="nv">Location</span><span class="o">=</span>site:site_base_domain,rack:rack_base_domain,machine:machine_base_domain,process:process_base_domain,member:member_base_domain, <span class="nv">Role</span><span class="o">=</span>CoherenceServer, <span class="nv">Edition</span><span class="o">=</span>Grid Edition, <span class="nv">Mode</span><span class="o">=</span>Production, <span class="nv">CpuCount</span><span class="o">=</span>4, <span class="nv">SocketCount</span><span class="o">=</span>1<span class="o">)</span>

... Service TransportService is bound to tmb://10.65.34.245:9002.47964

... Service TransportService joined the cluster with senior service member 1

... Connection established with tmb://10.65.34.245:9000.44385
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p>Cache Config가 구성 되었다는 Log</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre></td>
<td class="rouge-code"><pre>&lt;Configured session model <span class="s2">"SplitHttpSessionCollection"</span>:
  Clustered Session Cache <span class="nv">Name</span><span class="o">=</span>session-storage
  Local Session Cache <span class="nv">Name</span><span class="o">=</span>local-session-storage
  Local Session Attribute Cache <span class="nv">Name</span><span class="o">=</span>local-attribute-storage
  SessionDistributionController Class <span class="nv">Name</span><span class="o">=</span>
  AttributeScopeController Class <span class="nv">Name</span><span class="o">=</span>com.tangosol.coherence.servlet.AbstractHttpSessionCollection<span class="nv">$ApplicationScopeController</span>
  Maximum Session Inactive <span class="nv">Seconds</span><span class="o">=</span>30
  Session ID Character <span class="nv">Length</span><span class="o">=</span>52
  Session Get Lock <span class="nv">Timeout</span><span class="o">=</span>300
  Suspect Attribute <span class="nv">Detection</span><span class="o">=</span><span class="nb">true
  </span>Strict <span class="s2">"Servlet Specification"</span> Exception <span class="nv">Handling</span><span class="o">=</span><span class="nb">true
  </span>Sticky Session <span class="nv">Ownership</span><span class="o">=</span><span class="nb">false
  </span>Sticky Session Ownership Service <span class="nv">Name</span><span class="o">=</span>SessionOwnership
  Assume Session Locality <span class="k">for </span><span class="nv">Reaping</span><span class="o">=</span><span class="nb">false
  </span>Parallel Session <span class="nv">Reaping</span><span class="o">=</span><span class="nb">false
  </span>Allow Local <span class="nv">Attributes</span><span class="o">=</span><span class="nb">false
  </span>Use Default Session ID <span class="nv">Decoding</span><span class="o">=</span><span class="nb">true
  </span>Use Default Session ID <span class="nv">Encoding</span><span class="o">=</span><span class="nb">false
  </span>Session ID Affinity <span class="nv">Token</span><span class="o">=</span>null
  Session ID Replace Affinity <span class="nv">Token</span><span class="o">=</span><span class="nb">false
  </span>Session Expiry Filter <span class="nv">Factory</span><span class="o">=</span>
  Session Access Debug Logging <span class="nv">Enabled</span><span class="o">=</span><span class="nb">false
  </span>Session Access Debug Logging <span class="nv">Filter</span><span class="o">=</span>
  Session Locking <span class="nv">Mode</span><span class="o">=</span>none
  Session Reaping <span class="nv">Mechanism</span><span class="o">=</span>Default&gt;
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p>MBean 에 등록된다.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td>
<td class="rouge-code"><pre>INFO: Registering MBean using object name <span class="s2">"type=WebLogicHttpSessionManager,nodeId=2,appId=coh14cAppcoh14cApp"</span>
2023-04-24 12:05:28.831/473.137 Oracle Coherence GE 14.1.1.0.0 &lt;Info&gt; <span class="o">(</span><span class="nv">thread</span><span class="o">=[</span>STANDBY] ExecuteThread: <span class="s1">'3'</span> <span class="k">for </span>queue: <span class="s1">'weblogic.kernel.Default (self-tuning)'</span>, <span class="nv">member</span><span class="o">=</span>2<span class="o">)</span>: Registering MBean using object name <span class="s2">"type=WebLogicHttpSessionManager,nodeId=2,appId=coh14cAppcoh14cApp"</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>



    </div>

</article>
<div class="post-nav">
<a class="previous" href="/weblogic/Security-Constraint" title="[WebLogic] security-constraint in web.xml">(이전) [WebLogic] security-constraint in web.xml</a><a class="next" href="/coherence/How-to-use-Coherence-Web-14c" title="[Coherence/Web] How to use Coherence Web 14c">[Coherence/Web] How to use Coherence Web... (다음)</a>
</div>
<div class="post-related">
      <div>Related Articles</div>
      <ul>
        <li><a class="post-link" href="/weblogic/What-Is-Serializable" title="[WebLogic] Serializable 란 무엇인가?">[WebLogic] Serializable 란 무엇인가?</a></li>
<li><a class="post-link" href="/weblogic/Get-Real-IP" title="[WebLogic] 웹로직 Client IP와 WebServer IP를 얻는 방법">[WebLogic] 웹로직 Client IP와 WebServer IP를 얻는 방법</a></li>
<li><a class="post-link" href="/rhcsa/ExpandLVM" title="[RHCSA] LVM 확장">[RHCSA] LVM 확장</a></li>
<li><a class="post-link" href="/odi/Size-Limit-Exception-With-ODI-Studio-When-Reading-Queue" title="[ODI] Size limit exception with ODI studio when reading queue">[ODI] Size limit exception with ODI studio when reading queue</a></li>
</ul>
    </div>
<div class="post-comments"></div></section>
</div>


  </section>
  <section class="sidebar" style="margin-left: 15px;">
    <!-- Get sidebar items --><style type="text/css" media="screen">
.post-menu ul {
  list-style: none;
  padding: 0;
  margin: 0;
}
</style>

<div class="post-menu">
  <div class="post-menu-title">TOC</div>
  <div class="post-menu-content"></div>
</div>

<script>
  function generateContent() {
    var menu = document.querySelector(".post-menu");
    var menuContent =  menu.querySelector(".post-menu-content");
    var headings = document.querySelector(".post-content").querySelectorAll("h2, h3, h4, h5, h6");

    // Hide menu when no headings
    if (headings.length === 0) {
      return menu.style.display = "none";
    }

    // Generate post menu
    var menuHTML = '';
    for (var i = 0; i < headings.length; i++) {
      var h = headings[i];
      menuHTML += (
        '<li class="h-' + h.tagName.toLowerCase() + '">'
        + '<a href="#h-' + h.getAttribute('id') + '">' + h.textContent + '</a></li>');
    }

    menuContent.innerHTML = '<ul>' + menuHTML + '</ul>';

    // The header element
    var header = document.querySelector('header.site-header');

    function doMenuCollapse(index, over_items) {
      var items = menuContent.firstChild.children;

      if (over_items == undefined) {
        over_items = 20;
      }

      if (items.length < over_items) {
        return;
      }

      var activeItem = items[index];
      var beginItem = activeItem
      var endItem = activeItem
      var beginIndex = index;
      var endIndex = index + 1;
      while (beginIndex >= 0
        && !items[beginIndex].classList.contains('h-h2')) {
        beginIndex -= 1;
      }
      while (endIndex < items.length
        && !items[endIndex].classList.contains('h-h2')) {
        endIndex += 1;
      }
      for (var i = 0; i < beginIndex; i++) {
        item = items[i]
        if (!item.classList.contains('h-h2')) {
          item.style.display = 'none';
        }
      }
      for (var i = beginIndex + 1; i < endIndex; i++) {
        item = items[i]
        // if (!item.classList.contains('h-h2')) {
          item.style.display = '';
        // }
      }
      for (var i = endIndex; i < items.length; i++) {
        item = items[i]
        if (!item.classList.contains('h-h2')) {
          item.style.display = 'none';
        }
      }
    }

    // Init menu collapsed
    doMenuCollapse(-1);

    // Active the menu item
    window.addEventListener('scroll', function (event) {
      var lastActive = menuContent.querySelector('.active');
      var changed = true;
      var activeIndex = -1;
      for (var i = headings.length - 1; i >= 0; i--) {
        var h = headings[i];
        var headingRect = h.getBoundingClientRect();
        var headerRect = header.getBoundingClientRect();
        var headerTop = Math.floor(headerRect.top);
        var headerHeight = Math.floor(headerRect.height);
        var headerHeight = headerTop + headerHeight + 20;
        if (headingRect.top <= headerHeight) {
          var id = 'h-' + h.getAttribute('id');
          var a = menuContent.querySelector('a[href="#' + id  + '"]');
          var curActive = a.parentNode;
          if (curActive) {
            curActive.classList.add('active');
            activeIndex = i;
          }
          if (lastActive == curActive) {
            changed = false;
          }
          break;
        }
      }
      if (changed) {
        if (lastActive) {
          lastActive.classList.remove('active');
        }
        doMenuCollapse(activeIndex);
      }
      event.preventDefault();
    });
  }
  generateContent();
</script>
</section>
</div>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">
    <div class="site-footer-inner">
<div>Copyright 2015-2024. DongHyun Kim All data cannot be copied without permission.</div>
      <div>Powered by <a title="Jekyll is a simple, blog-aware, static site
      generator." href="http://jekyllrb.com/">Jekyll</a> &amp; <a title="Yat, yet
      another theme." href="https://github.com/jeffreytse/jekyll-theme-yat">Yat Theme</a>.</div>
      <div class="footer-col rss-subscribe">Subscribe <a href="/feed.xml">via RSS</a>
</div>
    </div>
  </div>
</footer>
</body>
</html>
